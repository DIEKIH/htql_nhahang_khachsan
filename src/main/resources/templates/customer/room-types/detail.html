<!--<!DOCTYPE html>-->
<!--<html lang="vi" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${roomType.name + ' - ' + branch.name}">Chi Tiết Phòng - Luxury Resort</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">-->
<!--    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">-->
<!--    <style>-->
<!--        :root {-->
<!--            &#45;&#45;primary-color: #c9a96e;-->
<!--            &#45;&#45;secondary-color: #2c3e50;-->
<!--            &#45;&#45;accent-color: #f8f9fa;-->
<!--            &#45;&#45;text-dark: #2c3e50;-->
<!--            &#45;&#45;text-light: #6c757d;-->
<!--        }-->

<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->


<!--        /* SỬA THÀNH: */-->
<!--        body {-->
<!--            font-family: 'Inter', sans-serif;-->
<!--            line-height: 1.6;  /* Sửa từ 1.5 → 1.6 */-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            padding-top: 80px;  /* Sửa từ 60px → 80px */-->
<!--            /* XÓA font-size: 13px; để dùng mặc định 16px */-->
<!--        }-->

<!--        /* XÓA HOÀN TOÀN hoặc sửa: */-->
<!--        .container {-->
<!--            max-width: 1320px;  /* Hoặc không có dòng này */-->
<!--        }-->

<!--        .heading-font {-->
<!--            font-family: 'Playfair Display', serif;-->
<!--        }-->

<!--        .navbar {-->
<!--            background: rgba(255, 255, 255, 0.95) !important;-->
<!--            backdrop-filter: blur(10px);-->
<!--            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);-->
<!--            transition: all 0.3s ease;-->
<!--            min-height: 80px;  /* THÊM dòng này để đảm bảo chiều cao tối thiểu */-->
<!--            padding: 0.5rem 1rem;  /* THÊM padding cho navbar */-->
<!--        }-->

<!--        .navbar-brand {-->
<!--            font-family: 'Playfair Display', serif;-->
<!--            font-size: 2rem;  /* Giữ nguyên, đã đúng */-->
<!--            font-weight: 600;-->
<!--            color: var(&#45;&#45;primary-color) !important;-->
<!--        }-->


<!--        .navbar-nav .nav-link {-->
<!--            font-weight: 500;-->
<!--            margin: 0 10px;-->
<!--            color: var(&#45;&#45;text-dark) !important;-->
<!--            transition: all 0.3s ease;-->
<!--            font-size: 1rem;  /* THÊM dòng này - font-size mặc định thay vì 13px */-->
<!--        }-->

<!--        .navbar-nav .nav-link:hover {-->
<!--            color: var(&#45;&#45;primary-color) !important;-->
<!--        }-->

<!--        .btn-luxury {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--            padding: 12px 30px;  /* Đã sửa từ 8px 20px */-->
<!--            border: none;-->
<!--            font-weight: 600;-->
<!--            text-transform: uppercase;-->
<!--            letter-spacing: 0.5px;  /* Giữ nguyên */-->
<!--            transition: all 0.3s ease;-->
<!--            border-radius: 50px;-->
<!--            font-size: 12px;  /* Giữ nguyên hoặc có thể tăng lên 13px */-->
<!--        }-->

<!--        .btn-luxury:hover {-->
<!--            background: #b8956b;-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 8px 20px rgba(201, 169, 110, 0.4);-->
<!--            color: white;-->
<!--        }-->


<!--        .room-gallery {-->
<!--            height: 450px;-->
<!--            overflow: hidden;-->
<!--            border-radius: 15px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .main-image {-->
<!--            height: 100%;-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--        }-->

<!--        .main-image img {-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            object-fit: cover;-->
<!--            transition: transform 0.5s ease;-->
<!--        }-->

<!--        .gallery-thumbnails {-->
<!--            position: absolute;-->
<!--            bottom: 15px;-->
<!--            left: 15px;-->
<!--            right: 15px;-->
<!--            display: flex;-->
<!--            gap: 8px;-->
<!--            overflow-x: auto;-->
<!--        }-->

<!--        .thumbnail {-->
<!--            width: 60px;-->
<!--            height: 45px;-->
<!--            border-radius: 6px;-->
<!--            overflow: hidden;-->
<!--            border: 2px solid transparent;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            flex-shrink: 0;-->
<!--        }-->

<!--        .thumbnail.active {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        .thumbnail img {-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            object-fit: cover;-->
<!--        }-->

<!--        .gallery-overlay {-->
<!--            position: absolute;-->
<!--            top: 15px;-->
<!--            right: 15px;-->
<!--            background: rgba(0, 0, 0, 0.7);-->
<!--            color: white;-->
<!--            padding: 6px 15px;-->
<!--            border-radius: 20px;-->
<!--            font-weight: 600;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .room-header {-->
<!--            border-bottom: 2px solid var(&#45;&#45;accent-color);-->
<!--            padding-bottom: 20px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .room-title {-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            margin-bottom: 10px;-->
<!--            font-size: 1.8rem;-->
<!--        }-->

<!--        .room-rating {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 10px;-->
<!--            margin-bottom: 15px;-->
<!--            font-size: 13px;-->
<!--        }-->

<!--        .stars {-->
<!--            color: #ffc107;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .price-display {-->
<!--            text-align: right;-->
<!--        }-->

<!--        .current-price {-->
<!--            font-size: 1.8rem;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            font-weight: 700;-->
<!--        }-->

<!--        .old-price {-->
<!--            text-decoration: line-through;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 1rem;-->
<!--        }-->

<!--        .price-note {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 0.8rem;-->
<!--        }-->

<!--        .lead {-->
<!--            font-size: 1rem;-->
<!--        }-->

<!--        .features-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));-->
<!--            gap: 15px;-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .feature-item {-->
<!--            background: white;-->
<!--            border: 2px solid var(&#45;&#45;accent-color);-->
<!--            border-radius: 12px;-->
<!--            padding: 18px;-->
<!--            text-align: center;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .feature-item:hover {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            transform: translateY(-3px);-->
<!--        }-->

<!--        .feature-icon {-->
<!--            width: 45px;-->
<!--            height: 45px;-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            border-radius: 50%;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            margin: 0 auto 10px;-->
<!--            color: white;-->
<!--            font-size: 1.1rem;-->
<!--        }-->

<!--        .feature-item h6 {-->
<!--            font-size: 14px;-->
<!--            margin-bottom: 5px;-->
<!--        }-->

<!--        .feature-item p {-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .amenities-section {-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            padding: 25px;-->
<!--            border-radius: 15px;-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .amenities-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));-->
<!--            gap: 15px;-->
<!--        }-->

<!--        .amenity-category h6 {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            margin-bottom: 12px;-->
<!--            font-weight: 600;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .amenity-item {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 6px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .amenity-item i {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            width: 18px;-->
<!--            margin-right: 8px;-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .booking-widget {-->
<!--            position: sticky;-->
<!--            top: 80px;-->
<!--            background: white;-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);-->
<!--            padding: 20px;-->
<!--            border: 2px solid var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        .booking-widget h5 {-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            margin-bottom: 18px;-->
<!--            text-align: center;-->
<!--            font-size: 1.1rem;-->
<!--        }-->

<!--        .booking-form .form-label {-->
<!--            font-weight: 600;-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            font-size: 12px;-->
<!--            margin-bottom: 5px;-->
<!--        }-->

<!--        .booking-form .form-control,-->
<!--        .booking-form .form-select {-->
<!--            border: 2px solid #eee;-->
<!--            border-radius: 8px;-->
<!--            padding: 8px 12px;-->
<!--            margin-bottom: 12px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .booking-form .form-control:focus,-->
<!--        .booking-form .form-select:focus {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            box-shadow: 0 0 0 0.15rem rgba(201, 169, 110, 0.25);-->
<!--        }-->

<!--        .g-3 {-->
<!--            gap: 0.75rem !important;-->
<!--        }-->

<!--        .pricing-summary {-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            padding: 15px;-->
<!--            border-radius: 12px;-->
<!--            margin: 15px 0;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .pricing-row {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            margin-bottom: 8px;-->
<!--        }-->

<!--        .pricing-row.total {-->
<!--            font-weight: 700;-->
<!--            font-size: 1rem;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            border-top: 1px solid #ddd;-->
<!--            padding-top: 8px;-->
<!--        }-->

<!--        .review-card {-->
<!--            background: white;-->
<!--            border-radius: 12px;-->
<!--            padding: 18px;-->
<!--            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .reviewer-info {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 12px;-->
<!--        }-->

<!--        .reviewer-avatar {-->
<!--            width: 40px;-->
<!--            height: 40px;-->
<!--            border-radius: 50%;-->
<!--            object-fit: cover;-->
<!--            margin-right: 12px;-->
<!--        }-->

<!--        .reviewer-name {-->
<!--            font-weight: 600;-->
<!--            margin-bottom: 3px;-->
<!--            font-size: 13px;-->
<!--        }-->

<!--        .review-date {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .review-rating {-->
<!--            color: #ffc107;-->
<!--            margin-bottom: 12px;-->
<!--            font-size: 13px;-->
<!--        }-->

<!--        .review-card p {-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .nav-tabs {-->
<!--            border: none;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .nav-tabs .nav-link {-->
<!--            border: none;-->
<!--            background: none;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-weight: 600;-->
<!--            padding: 10px 18px;-->
<!--            border-radius: 20px;-->
<!--            margin-right: 8px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .nav-tabs .nav-link.active {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--        }-->

<!--        .nav-tabs .nav-link i {-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .breadcrumb {-->
<!--            font-size: 12px;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .alert {-->
<!--            padding: 10px 15px;-->
<!--            font-size: 12px;-->
<!--            border-radius: 8px;-->
<!--        }-->

<!--        .card {-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .card-title {-->
<!--            font-size: 1rem;-->
<!--        }-->

<!--        .card-body {-->
<!--            padding: 15px;-->
<!--        }-->

<!--        .card-img-top {-->
<!--            height: 180px;-->
<!--        }-->

<!--        .amenity-tag {-->
<!--            display: inline-block;-->
<!--            padding: 4px 10px;-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            border-radius: 15px;-->
<!--            margin-right: 6px;-->
<!--            margin-bottom: 6px;-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        small {-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .btn-sm {-->
<!--            padding: 5px 12px;-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .btn-outline-primary {-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        @media (max-width: 768px) {-->
<!--            .room-gallery {-->
<!--                height: 300px;-->
<!--            }-->

<!--            .features-grid {-->
<!--                grid-template-columns: 1fr 1fr;-->
<!--            }-->

<!--            .booking-widget {-->
<!--                position: static;-->
<!--                margin-top: 20px;-->
<!--            }-->

<!--            .price-display {-->
<!--                text-align: left;-->
<!--                margin-top: 15px;-->
<!--            }-->

<!--            .current-price {-->
<!--                font-size: 1.5rem;-->
<!--            }-->

<!--            .room-title {-->
<!--                font-size: 1.5rem;-->
<!--            }-->
<!--        }-->

<!--        .fade-in {-->
<!--            animation: fadeIn 0.8s ease-in;-->
<!--        }-->

<!--        @keyframes fadeIn {-->
<!--            from { opacity: 0; transform: translateY(15px); }-->
<!--            to { opacity: 1; transform: translateY(0); }-->
<!--        }-->


<!--        /* Rating Statistics */-->
<!--        .rating-overview {-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            padding: 25px;-->
<!--            border-radius: 15px;-->
<!--            margin-bottom: 25px;-->
<!--        }-->

<!--        .rating-score {-->
<!--            text-align: center;-->
<!--            border-right: 1px solid #ddd;-->
<!--            padding-right: 25px;-->
<!--        }-->

<!--        .rating-number {-->
<!--            font-size: 3rem;-->
<!--            font-weight: 700;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            line-height: 1;-->
<!--        }-->

<!--        .rating-stars {-->
<!--            color: #ffc107;-->
<!--            font-size: 1.2rem;-->
<!--            margin: 8px 0;-->
<!--        }-->

<!--        .rating-count {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .rating-bars {-->
<!--            padding-left: 25px;-->
<!--        }-->

<!--        .rating-bar-row {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 8px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .rating-bar-label {-->
<!--            width: 60px;-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--        }-->

<!--        .rating-bar-bg {-->
<!--            flex: 1;-->
<!--            height: 8px;-->
<!--            background: #e0e0e0;-->
<!--            border-radius: 4px;-->
<!--            overflow: hidden;-->
<!--            margin: 0 10px;-->
<!--        }-->

<!--        .rating-bar-fill {-->
<!--            height: 100%;-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            transition: width 0.3s ease;-->
<!--        }-->

<!--        .rating-bar-count {-->
<!--            width: 40px;-->
<!--            text-align: right;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--        }-->

<!--        /* Review Card */-->
<!--        .review-card {-->
<!--            background: white;-->
<!--            border-radius: 12px;-->
<!--            padding: 20px;-->
<!--            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);-->
<!--            margin-bottom: 15px;-->
<!--            position: relative;-->
<!--        }-->

<!--        .reviewer-info {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 12px;-->
<!--        }-->

<!--        .reviewer-avatar {-->
<!--            width: 45px;-->
<!--            height: 45px;-->
<!--            border-radius: 50%;-->
<!--            object-fit: cover;-->
<!--            margin-right: 12px;-->
<!--        }-->

<!--        .reviewer-name {-->
<!--            font-weight: 600;-->
<!--            margin-bottom: 3px;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .review-date {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 11px;-->
<!--        }-->

<!--        .review-rating {-->
<!--            color: #ffc107;-->
<!--            margin-bottom: 12px;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .review-actions {-->
<!--            position: absolute;-->
<!--            top: 20px;-->
<!--            right: 20px;-->
<!--        }-->

<!--        .review-action-btn {-->
<!--            background: none;-->
<!--            border: none;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            cursor: pointer;-->
<!--            padding: 5px 8px;-->
<!--            font-size: 14px;-->
<!--            transition: all 0.3s;-->
<!--        }-->

<!--        .review-action-btn:hover {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        /* Review Modal */-->
<!--        .modal-content {-->
<!--            border-radius: 15px;-->
<!--            border: none;-->
<!--        }-->

<!--        .modal-header {-->
<!--            background: linear-gradient(135deg, var(&#45;&#45;primary-color), #d4b079);-->
<!--            color: white;-->
<!--            border-radius: 15px 15px 0 0;-->
<!--            padding: 20px 25px;-->
<!--        }-->

<!--        .modal-title {-->
<!--            font-family: 'Playfair Display', serif;-->
<!--            font-weight: 600;-->
<!--        }-->

<!--        .btn-close {-->
<!--            filter: brightness(0) invert(1);-->
<!--        }-->

<!--        .star-rating {-->
<!--            display: flex;-->
<!--            gap: 10px;-->
<!--            justify-content: center;-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .star-rating i {-->
<!--            font-size: 2rem;-->
<!--            color: #ddd;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.2s;-->
<!--        }-->

<!--        .star-rating i:hover,-->
<!--        .star-rating i.active {-->
<!--            color: #ffc107;-->
<!--            transform: scale(1.1);-->
<!--        }-->

<!--        .review-textarea {-->
<!--            border: 2px solid #eee;-->
<!--            border-radius: 10px;-->
<!--            padding: 15px;-->
<!--            font-size: 13px;-->
<!--            min-height: 120px;-->
<!--            resize: vertical;-->
<!--        }-->

<!--        .review-textarea:focus {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            box-shadow: 0 0 0 0.15rem rgba(201, 169, 110, 0.25);-->
<!--        }-->

<!--        .btn-luxury {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--            padding: 10px 25px;-->
<!--            border: none;-->
<!--            font-weight: 600;-->
<!--            text-transform: uppercase;-->
<!--            letter-spacing: 0.5px;-->
<!--            transition: all 0.3s ease;-->
<!--            border-radius: 50px;-->
<!--            font-size: 13px;-->
<!--        }-->

<!--        .btn-luxury:hover {-->
<!--            background: #b8956b;-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 8px 20px rgba(201, 169, 110, 0.4);-->
<!--            color: white;-->
<!--        }-->

<!--        .empty-reviews {-->
<!--            text-align: center;-->
<!--            padding: 40px;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--        }-->

<!--        .empty-reviews i {-->
<!--            font-size: 3rem;-->
<!--            color: #ddd;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        rating-score .rating-number {-->
<!--            font-size: 3rem;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        .review-card {-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .review-card:hover {-->
<!--            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        .star-rating i {-->
<!--            transition: all 0.2s ease;-->
<!--        }-->

<!--        .star-rating i:hover,-->
<!--        .star-rating i.active {-->
<!--            transform: scale(1.2);-->
<!--        }-->

<!--        .staff-response {-->
<!--            border-left: 4px solid #0d6efd;-->
<!--        }-->

<!--        /* Pagination */-->
<!--        .pagination {-->
<!--            justify-content: center;-->
<!--            margin-top: 25px;-->
<!--        }-->

<!--        .page-link {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            border: 1px solid #dee2e6;-->
<!--            padding: 8px 12px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .page-link:hover {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        .page-item.active .page-link {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        /* Alert styling */-->
<!--        .alert {-->
<!--            border-radius: 10px;-->
<!--            padding: 12px 20px;-->
<!--            font-size: 13px;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .alert-info {-->
<!--            background: #e7f3ff;-->
<!--            border-color: #b3d9ff;-->
<!--            color: #004085;-->
<!--        }-->

<!--        /* Staff response */-->
<!--        .staff-response {-->
<!--            background: #f8f9fa;-->
<!--            border-left: 3px solid var(&#45;&#45;primary-color);-->
<!--            padding: 12px 15px;-->
<!--            margin-top: 12px;-->
<!--            border-radius: 5px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        .staff-response-header {-->
<!--            font-weight: 600;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            margin-bottom: 5px;-->
<!--            font-size: 12px;-->
<!--        }-->

<!--        @media (max-width: 768px) {-->
<!--            .rating-score {-->
<!--                border-right: none;-->
<!--                border-bottom: 1px solid #ddd;-->
<!--                padding-right: 0;-->
<!--                padding-bottom: 20px;-->
<!--                margin-bottom: 20px;-->
<!--            }-->

<!--            .rating-bars {-->
<!--                padding-left: 0;-->
<!--            }-->

<!--            .review-actions {-->
<!--                position: static;-->
<!--                margin-top: 10px;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->

<!--<body>-->
<!--&lt;!&ndash;<div th:replace="fragments/user_navbar :: user_navbar"></div>&ndash;&gt;-->
<!--<nav th:fragment="user_navbar" class="navbar navbar-expand-lg navbar-light fixed-top">-->
<!--    &lt;!&ndash; ↑ THÊM class "navbar-light" &ndash;&gt;-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand heading-font" th:href="@{/}">-->
<!--            &lt;!&ndash; ↑ THÊM class "heading-font" &ndash;&gt;-->
<!--            <i class="fas fa-crown me-2"></i>DIEK-->
<!--        </a>-->
<!--        <button class="navbar-toggler" type="button"-->
<!--                data-bs-toggle="collapse"-->
<!--                data-bs-target="#navbarNav"-->
<!--                aria-controls="navbarNav"-->
<!--                aria-expanded="false"-->
<!--                aria-label="Toggle navigation">-->
<!--            &lt;!&ndash; ↑ THÊM các aria attributes &ndash;&gt;-->
<!--            <span class="navbar-toggler-icon"></span>-->
<!--        </button>-->
<!--        <div class="collapse navbar-collapse" id="navbarNav">-->
<!--            <ul class="navbar-nav ms-auto" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" th:href="@{/}">Trang chủ</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" th:href="@{/#branches}">Chi nhánh</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#facilities">Tiện ích</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#contact">Liên hệ</a>-->
<!--                </li>-->

<!--                &lt;!&ndash; Login button for anonymous users &ndash;&gt;-->
<!--                <li class="nav-item" sec:authorize="isAnonymous()">-->
<!--                    <a class="nav-link btn btn-outline-primary ms-2" th:href="@{/customer/login}">-->
<!--                        <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập-->
<!--                    </a>-->
<!--                </li>-->

<!--                &lt;!&ndash; User dropdown for authenticated users &ndash;&gt;-->
<!--                <li class="nav-item dropdown" sec:authorize="isAuthenticated()">-->
<!--                    <a class="nav-link dropdown-toggle" href="#"-->
<!--                       id="navbarDropdown"-->
<!--                       role="button"-->
<!--                       data-bs-toggle="dropdown"-->
<!--                       aria-expanded="false">-->
<!--                        <i class="fas fa-user-circle me-1"></i>-->
<!--                        <span sec:authentication="name">Username</span>-->
<!--                    </a>-->
<!--                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">-->
<!--                        <li>-->
<!--                            <a class="dropdown-item" th:href="@{/cart}">-->
<!--                                <i class="fas fa-shopping-cart fa-fw me-2"></i>Giỏ hàng-->
<!--                                <span class="badge bg-danger rounded-pill"-->
<!--                                      th:if="${session.cartItemCount > 0}"-->
<!--                                      th:text="${session.cartItemCount}">0</span>-->
<!--                            </a>-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <a class="dropdown-item" th:href="@{/orders}">-->
<!--                                <i class="fas fa-receipt fa-fw me-2"></i>Xem đơn hàng-->
<!--                            </a>-->
<!--                        </li>-->
<!--                        <li><hr class="dropdown-divider"></li>-->
<!--                        <li>-->
<!--                            <form th:action="@{/logout}" method="post" class="d-inline">-->
<!--                                <button type="submit" class="dropdown-item">-->
<!--                                    <i class="fas fa-sign-out-alt fa-fw me-2"></i>Đăng xuất-->
<!--                                </button>-->
<!--                            </form>-->
<!--                        </li>-->
<!--                    </ul>-->
<!--                </li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<!--<div class="container my-5">-->
<!--    <nav aria-label="breadcrumb" class="mb-4">-->
<!--        <ol class="breadcrumb">-->
<!--            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>-->
<!--            <li class="breadcrumb-item"><a th:href="@{/branches/{id}(id=${branch.id})}" th:text="${branch.name}">Chi nhánh</a></li>-->
<!--            <li class="breadcrumb-item active" th:text="${roomType.name}">Loại phòng</li>-->
<!--        </ol>-->
<!--    </nav>-->

<!--    <div class="row">-->
<!--        <div class="col-lg-8">-->
<!--            <div class="room-gallery fade-in">-->
<!--                <div class="main-image">-->
<!--                    <div th:with="mainImageUrl=${#lists.isEmpty(roomImages) ?-->
<!--                           'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80' :-->
<!--                           roomImages.get(0).imageUrl}">-->
<!--                        <img id="mainImage" th:src="${mainImageUrl}" th:alt="${roomType.name}">-->
<!--                    </div>-->

<!--                    <div class="gallery-overlay">-->
<!--                        <i class="fas fa-camera me-2"></i><span th:text="${#lists.size(roomImages)}">0</span> ảnh-->
<!--                    </div>-->
<!--                    <div class="gallery-thumbnails">-->
<!--                        <div class="thumbnail"-->
<!--                             th:each="image, iterStat : ${roomImages}"-->
<!--                             th:classappend="${iterStat.first} ? 'active' : ''"-->
<!--                             th:data-image-url="${image.imageUrl}"-->
<!--                             onclick="changeImage(this.dataset.imageUrl, this)">-->
<!--                            <img th:src="${image.imageUrl}" th:alt="${image.imageTitle}">-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="room-header fade-in">-->
<!--                <div class="row align-items-end">-->
<!--                    <div class="col-md-8">-->
<!--                        <h1 class="room-title heading-font" th:text="${roomType.name}">Tên loại phòng</h1>-->
<!--                        <div class="room-rating">-->
<!--                            <div class="stars">-->
<!--                                <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, 5)}"></i>-->
<!--                            </div>-->
<!--                            <span class="fw-semibold">4.8/5</span>-->
<!--                            <span class="text-muted">(124 đánh giá)</span>-->
<!--                        </div>-->
<!--                        <p class="lead text-muted" th:text="${roomType.description}">Mô tả loại phòng</p>-->
<!--                    </div>-->
<!--                    <div class="col-md-4 price-display">-->
<!--                        <div class="old-price" th:if="${roomType.originalPrice != null and roomType.originalPrice > roomType.currentPrice}"-->
<!--                             th:text="${#numbers.formatDecimal(roomType.originalPrice, 0, 'COMMA', 0, 'POINT') + '₫'}">-->
<!--                        </div>-->
<!--                        <div class="current-price" th:text="${roomType.formattedPrice}">Giá phòng</div>-->
<!--                        <div class="price-note">/ đêm (chưa bao gồm thuế)</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="features-grid fade-in">-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-bed"></i>-->
<!--                    </div>-->
<!--                    <h6 th:text="${roomType.bedType}">Loại giường</h6>-->
<!--                    <p class="mb-0 text-muted">Giường cao cấp</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-users"></i>-->
<!--                    </div>-->
<!--                    <h6><span th:text="${roomType.maxOccupancy}">0</span> Khách</h6>-->
<!--                    <p class="mb-0 text-muted">Số người tối đa</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-ruler"></i>-->
<!--                    </div>-->
<!--                    <h6><span th:text="${roomType.roomSize}">0</span>m²</h6>-->
<!--                    <p class="mb-0 text-muted">Diện tích phòng</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-eye"></i>-->
<!--                    </div>-->
<!--                    <h6 th:text="${roomType.viewType ?: 'City View'}">Tầm nhìn</h6>-->
<!--                    <p class="mb-0 text-muted">View từ phòng</p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="fade-in">-->
<!--                <ul class="nav nav-tabs" id="roomTabs">-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#amenities">-->
<!--                            <i class="fas fa-concierge-bell me-2"></i>Tiện nghi-->
<!--                        </button>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#policies">-->
<!--                            <i class="fas fa-file-contract me-2"></i>Chính sách-->
<!--                        </button>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviews">-->
<!--                            <i class="fas fa-star me-2"></i>Đánh giá-->
<!--                        </button>-->
<!--                    </li>-->
<!--                </ul>-->

<!--                <div class="tab-content">-->
<!--                    <div class="tab-pane fade show active" id="amenities">-->
<!--                        <div class="amenities-section">-->
<!--                            <div class="amenities-grid">-->
<!--                                <div class="amenity-category" th:if="${roomType.amenities != null}">-->
<!--                                    <h6><i class="fas fa-concierge-bell me-2"></i>Tiện nghi phòng</h6>-->
<!--                                    <div class="amenity-item" th:each="amenity : ${#strings.listSplit(roomType.amenities, ',')}">-->
<!--                                        <i class="fas fa-check"></i>-->
<!--                                        <span th:text="${#strings.trim(amenity)}">Tiện nghi</span>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-bed me-2"></i>Phòng ngủ</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i>-->
<!--                                        <span th:text="${roomType.bedType + ' cao cấp'}">Giường cao cấp</span>-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Ga giường cotton cao cấp-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Gối memory foam-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-bath me-2"></i>Phòng tắm</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Vòi hoa sen mưa-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Đồ dùng vệ sinh cao cấp-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Áo choàng tắm & dép-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-wifi me-2"></i>Công nghệ</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> WiFi tốc độ cao miễn phí-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Smart TV-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Điều hòa thông minh-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="tab-pane fade" id="policies">-->
<!--                        <div class="amenities-section">-->
<!--                            <div class="row">-->
<!--                                <div class="col-md-6">-->
<!--                                    <h6><i class="fas fa-clock me-2 text-primary"></i>Thời gian</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2"><i class="fas fa-sign-in-alt me-2 text-success"></i> Check-in: 15:00</li>-->
<!--                                        <li class="mb-2"><i class="fas fa-sign-out-alt me-2 text-danger"></i> Check-out: 12:00</li>-->
<!--                                        <li class="mb-2"><i class="fas fa-calendar me-2 text-info"></i> Check-in sớm có thể được sắp xếp</li>-->
<!--                                    </ul>-->

<!--                                    <h6 class="mt-4"><i class="fas fa-ban me-2 text-danger"></i>Hủy phòng</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2">• Hủy miễn phí trước 24h</li>-->
<!--                                        <li class="mb-2">• Hủy trong vòng 24h: phí 50%</li>-->
<!--                                        <li class="mb-2">• No-show: tính 100% phí phòng</li>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                                <div class="col-md-6">-->
<!--                                    <h6><i class="fas fa-info-circle me-2 text-info"></i>Thông tin khác</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2">• Không hút thuốc</li>-->
<!--                                        <li class="mb-2">• Đảm bảo thẻ tín dụng khi check-in</li>-->
<!--                                        <li class="mb-2">• Phí phụ thu cho khách vượt quá</li>-->
<!--                                        <li class="mb-2">• Dịch vụ dọn phòng hàng ngày</li>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="tab-pane fade" id="reviews">-->
<!--                        <div class="review-card">-->
<!--                            <div class="reviewer-info">-->
<!--                                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b605?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Reviewer" class="reviewer-avatar">-->
<!--                                <div>-->
<!--                                    <div class="reviewer-name">Nguyễn Minh Anh</div>-->
<!--                                    <div class="review-date">15 tháng 8, 2024</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="review-rating">-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                            </div>-->
<!--                            <p>"Phòng tuyệt vời với thiết kế hiện đại. Dịch vụ chu đáo, nhân viên thân thiện. Sẽ quay lại lần sau!"</p>-->
<!--                        </div>-->

<!--                        <button class="btn btn-outline-primary">Xem thêm đánh giá</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="col-lg-4">-->
<!--            <div class="booking-widget fade-in">-->
<!--                <h5><i class="fas fa-calendar-check me-2"></i>Đặt phòng ngay</h5>-->

<!--                <form class="booking-form"-->
<!--                      th:action="@{/bookings/room-type/{id}/select(id=${roomType.id})}"-->
<!--                      method="post">-->

<!--                    <div class="row g-3">-->
<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-calendar-alt me-1"></i>Ngày nhận phòng-->
<!--                            </label>-->
<!--                            <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>-->
<!--                        </div>-->

<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-calendar-alt me-1"></i>Ngày trả phòng-->
<!--                            </label>-->
<!--                            <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>-->
<!--                        </div>-->

<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-door-open me-1"></i>Số lượng phòng-->
<!--                            </label>-->
<!--                            <select class="form-select" name="numberOfRooms" id="numberOfRooms" required>-->
<!--                                <option value="1" selected>1 phòng</option>-->
<!--                                <option value="2">2 phòng</option>-->
<!--                                <option value="3">3 phòng</option>-->
<!--                                <option value="4">4 phòng</option>-->
<!--                                <option value="5">5 phòng</option>-->
<!--                            </select>-->
<!--                            <small class="text-muted">Tối đa 5 phòng/lần đặt</small>-->
<!--                        </div>-->

<!--                        <div class="col-6">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-user me-1"></i>Người lớn-->
<!--                            </label>-->
<!--                            <select class="form-select" name="adults" id="adults" required>-->
<!--                                <option value="1">1</option>-->
<!--                                <option value="2" selected>2</option>-->
<!--                                <option value="3" th:if="${roomType.maxOccupancy >= 3}">3</option>-->
<!--                                <option value="4" th:if="${roomType.maxOccupancy >= 4}">4</option>-->
<!--                            </select>-->
<!--                        </div>-->

<!--                        <div class="col-6">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-child me-1"></i>Trẻ em-->
<!--                            </label>-->
<!--                            <select class="form-select" name="children" id="children">-->
<!--                                <option value="0" selected>0</option>-->
<!--                                <option value="1">1</option>-->
<!--                                <option value="2">2</option>-->
<!--                                <option value="3">3</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div id="availabilityInfo" class="mt-3"></div>-->

<!--                    <div class="pricing-summary mt-3">-->
<!--                        <div class="pricing-row">-->
<!--                            <span id="priceText" th:text="${roomType.formattedPrice + ' x 1 đêm x 1 phòng'}"></span>-->
<!--                            <span id="basePrice" th:text="${roomType.formattedPrice}">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row">-->
<!--                            <span>Phí dịch vụ (10%)</span>-->
<!--                            <span id="servicePrice">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row">-->
<!--                            <span>Thuế VAT (10%)</span>-->
<!--                            <span id="vatPrice">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row total">-->
<!--                            <span>Tổng cộng</span>-->
<!--                            <span id="totalPrice" th:text="${roomType.formattedPrice}">0₫</span>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <button type="submit" class="btn btn-luxury w-100 mt-3" id="bookingBtn">-->
<!--                        <i class="fas fa-arrow-right me-2"></i>Tiếp tục-->
<!--                    </button>-->

<!--                    <div class="text-center mt-3">-->
<!--                        <small class="text-muted">-->
<!--                            <i class="fas fa-shield-alt me-1"></i>-->
<!--                            Không tính phí cho đến khi xác nhận-->
<!--                        </small>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; ✅ SECTION ĐÁNH GIÁ - Copy thay thế phần cũ trong detail.html &ndash;&gt;-->
<!--    <div class="row mt-5">-->
<!--        <div class="col-12">-->
<!--            <div class="card border-0 shadow-sm">-->
<!--                <div class="card-body p-4">-->
<!--                    <h3 class="heading-font mb-4">-->
<!--                        <i class="fas fa-star text-warning me-2"></i>Đánh giá từ khách hàng-->
<!--                    </h3>-->

<!--                    &lt;!&ndash; ✅ DEBUG INFO - XÓA SAU KHI TEST XONG &ndash;&gt;-->
<!--                    <div class="alert alert-info">-->
<!--                        <strong>🔍 DEBUG INFO:</strong><br>-->
<!--                        Total Reviews: <span th:text="${reviewStats.totalReviews}">0</span><br>-->
<!--                        Average Rating: <span th:text="${reviewStats.averageRating}">0.0</span><br>-->
<!--                        Has Content: <span th:text="${reviews != null ? reviews.hasContent() : false}">false</span><br>-->
<!--                        Number of Elements: <span th:text="${reviews != null ? reviews.numberOfElements : 0}">0</span><br>-->
<!--                        Total Pages: <span th:text="${reviews != null ? reviews.totalPages : 0}">0</span>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Rating Overview &ndash;&gt;-->
<!--                    <div class="rating-overview mb-4">-->
<!--                        <div class="row">-->
<!--                            <div class="col-md-3 text-center">-->
<!--                                <div class="rating-score">-->
<!--                                    <div class="rating-number display-4 fw-bold text-warning"-->
<!--                                         th:text="${#numbers.formatDecimal(reviewStats.averageRating, 1, 1)}">0.0</div>-->
<!--                                    <div class="rating-stars mb-2">-->
<!--                                        <i class="fas fa-star text-warning" th:each="i : ${#numbers.sequence(1, 5)}"></i>-->
<!--                                    </div>-->
<!--                                    <div class="text-muted">-->
<!--                                        <span th:text="${reviewStats.totalReviews}">0</span> đánh giá-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="col-md-9">-->
<!--                                <div class="rating-bars">-->
<!--                                    &lt;!&ndash; 5 stars &ndash;&gt;-->
<!--                                    <div class="d-flex align-items-center mb-2">-->
<!--                                        <div class="rating-bar-label" style="width: 60px;">-->
<!--                                            5 <i class="fas fa-star text-warning"></i>-->
<!--                                        </div>-->
<!--                                        <div class="progress flex-grow-1 mx-2" style="height: 8px;">-->
<!--                                            <div class="progress-bar bg-warning" role="progressbar"-->
<!--                                                 th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating5Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="rating-bar-count" style="width: 40px; text-align: right;"-->
<!--                                             th:text="${reviewStats.rating5Count}">0</div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; 4 stars &ndash;&gt;-->
<!--                                    <div class="d-flex align-items-center mb-2">-->
<!--                                        <div class="rating-bar-label" style="width: 60px;">-->
<!--                                            4 <i class="fas fa-star text-warning"></i>-->
<!--                                        </div>-->
<!--                                        <div class="progress flex-grow-1 mx-2" style="height: 8px;">-->
<!--                                            <div class="progress-bar bg-warning" role="progressbar"-->
<!--                                                 th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating4Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="rating-bar-count" style="width: 40px; text-align: right;"-->
<!--                                             th:text="${reviewStats.rating4Count}">0</div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; 3 stars &ndash;&gt;-->
<!--                                    <div class="d-flex align-items-center mb-2">-->
<!--                                        <div class="rating-bar-label" style="width: 60px;">-->
<!--                                            3 <i class="fas fa-star text-warning"></i>-->
<!--                                        </div>-->
<!--                                        <div class="progress flex-grow-1 mx-2" style="height: 8px;">-->
<!--                                            <div class="progress-bar bg-warning" role="progressbar"-->
<!--                                                 th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating3Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="rating-bar-count" style="width: 40px; text-align: right;"-->
<!--                                             th:text="${reviewStats.rating3Count}">0</div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; 2 stars &ndash;&gt;-->
<!--                                    <div class="d-flex align-items-center mb-2">-->
<!--                                        <div class="rating-bar-label" style="width: 60px;">-->
<!--                                            2 <i class="fas fa-star text-warning"></i>-->
<!--                                        </div>-->
<!--                                        <div class="progress flex-grow-1 mx-2" style="height: 8px;">-->
<!--                                            <div class="progress-bar bg-warning" role="progressbar"-->
<!--                                                 th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating2Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="rating-bar-count" style="width: 40px; text-align: right;"-->
<!--                                             th:text="${reviewStats.rating2Count}">0</div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; 1 star &ndash;&gt;-->
<!--                                    <div class="d-flex align-items-center mb-2">-->
<!--                                        <div class="rating-bar-label" style="width: 60px;">-->
<!--                                            1 <i class="fas fa-star text-warning"></i>-->
<!--                                        </div>-->
<!--                                        <div class="progress flex-grow-1 mx-2" style="height: 8px;">-->
<!--                                            <div class="progress-bar bg-warning" role="progressbar"-->
<!--                                                 th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating1Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="rating-bar-count" style="width: 40px; text-align: right;"-->
<!--                                             th:text="${reviewStats.rating1Count}">0</div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Write Review Button &ndash;&gt;-->
<!--                    <div class="text-center mb-4 p-3 bg-light rounded">-->
<!--                        <button th:if="${isLoggedIn and isCustomer and canReview and userReview == null}"-->
<!--                                class="btn btn-lg btn-warning"-->
<!--                                data-bs-toggle="modal"-->
<!--                                data-bs-target="#reviewModal">-->
<!--                            <i class="fas fa-pen me-2"></i>Viết đánh giá của bạn-->
<!--                        </button>-->

<!--                        <div th:if="${isLoggedIn and isCustomer and userReview != null}"-->
<!--                             class="alert alert-success d-inline-block mb-0">-->
<!--                            <i class="fas fa-check-circle me-2"></i>-->
<!--                            Bạn đã đánh giá loại phòng này-->
<!--                        </div>-->

<!--                        <div th:if="${!isLoggedIn}" class="alert alert-info d-inline-block mb-0">-->
<!--                            <i class="fas fa-info-circle me-2"></i>-->
<!--                            Vui lòng <a th:href="@{/customer/login}" class="fw-bold text-decoration-underline">đăng nhập</a> để viết đánh giá-->
<!--                        </div>-->

<!--                        <div th:if="${isLoggedIn and !isCustomer}"-->
<!--                             class="alert alert-warning d-inline-block mb-0">-->
<!--                            <i class="fas fa-user-shield me-2"></i>-->
<!--                            Chỉ khách hàng mới có thể đánh giá-->
<!--                        </div>-->

<!--                        <div th:if="${isLoggedIn and isCustomer and !canReview and userReview == null}"-->
<!--                             class="alert alert-warning d-inline-block mb-0">-->
<!--                            <i class="fas fa-exclamation-triangle me-2"></i>-->
<!--                            Bạn cần trải nghiệm dịch vụ để có thể đánh giá-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; ✅ DANH SÁCH ĐÁNH GIÁ - KIỂM TRA KỸ ĐIỀU KIỆN &ndash;&gt;-->
<!--                    <div th:if="${reviews != null and reviews.hasContent()}" class="reviews-list">-->
<!--                        <h5 class="mb-3">-->
<!--                            Tất cả đánh giá (<span th:text="${reviews.totalElements}">0</span>)-->
<!--                        </h5>-->

<!--                        &lt;!&ndash; Loop qua từng review &ndash;&gt;-->
<!--                        <div class="review-card border rounded p-3 mb-3" th:each="review : ${reviews.content}">-->
<!--                            <div class="d-flex align-items-start">-->
<!--                                &lt;!&ndash; Avatar &ndash;&gt;-->
<!--                                <img th:src="${review.avatarUrl != null and review.avatarUrl != '' ? review.avatarUrl : 'https://ui-avatars.com/api/?name=' + review.customerName + '&background=c9a96e&color=fff&size=80&bold=true'}"-->
<!--                                     alt="Avatar"-->
<!--                                     class="rounded-circle me-3"-->
<!--                                     style="width: 50px; height: 50px; object-fit: cover;">-->

<!--                                <div class="flex-grow-1">-->
<!--                                    &lt;!&ndash; Header &ndash;&gt;-->
<!--                                    <div class="d-flex justify-content-between align-items-center mb-2">-->
<!--                                        <div>-->
<!--                                            <div class="fw-bold" th:text="${review.customerName}">Tên khách hàng</div>-->
<!--                                            <small class="text-muted" th:text="${review.formattedDate}">01/01/2024 10:00</small>-->
<!--                                        </div>-->

<!--                                        &lt;!&ndash; Action buttons - chỉ hiển thị cho chủ nhân &ndash;&gt;-->
<!--                                        <div th:if="${isLoggedIn and isCustomer and currentUser != null and currentUser.id == review.customerId}"-->
<!--                                             class="btn-group">-->
<!--                                            <button class="btn btn-sm btn-outline-primary"-->
<!--                                                    onclick="editReview(this)"-->
<!--                                                    th:attr="data-review-id=${review.id},data-rating=${review.rating},data-comment=${review.comment}"-->
<!--                                                    title="Sửa đánh giá">-->
<!--                                                <i class="fas fa-edit"></i>-->
<!--                                            </button>-->
<!--                                            <button class="btn btn-sm btn-outline-danger"-->
<!--                                                    onclick="deleteReview(this)"-->
<!--                                                    th:attr="data-review-id=${review.id}"-->
<!--                                                    title="Xóa đánh giá">-->
<!--                                                <i class="fas fa-trash"></i>-->
<!--                                            </button>-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Rating &ndash;&gt;-->
<!--                                    <div class="review-rating mb-2">-->
<!--                                        <th:block th:each="i : ${#numbers.sequence(1, review.rating)}">-->
<!--                                            <i class="fas fa-star text-warning"></i>-->
<!--                                        </th:block>-->
<!--                                        <th:block th:each="i : ${#numbers.sequence(review.rating + 1, 5)}">-->
<!--                                            <i class="far fa-star text-warning"></i>-->
<!--                                        </th:block>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Comment &ndash;&gt;-->
<!--                                    <p class="mb-2" th:text="${review.comment}">Nội dung đánh giá...</p>-->

<!--                                    &lt;!&ndash; Staff Response &ndash;&gt;-->
<!--                                    <div class="staff-response bg-light p-3 rounded mt-2"-->
<!--                                         th:if="${review.staffResponse != null and review.staffResponse != ''}">-->
<!--                                        <div class="fw-bold text-primary mb-1">-->
<!--                                            <i class="fas fa-reply me-1"></i>Phản hồi từ khách sạn-->
<!--                                        </div>-->
<!--                                        <p class="mb-0" th:text="${review.staffResponse}">Phản hồi...</p>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Pagination &ndash;&gt;-->
<!--                        <nav th:if="${reviews.totalPages > 1}" class="mt-4">-->
<!--                            <ul class="pagination justify-content-center">-->
<!--                                <li class="page-item" th:classappend="${reviews.first} ? 'disabled'">-->
<!--                                    <a class="page-link"-->
<!--                                       th:href="@{/room-types/{id}(id=${roomType.id}, page=${reviews.number - 1})}">-->
<!--                                        <i class="fas fa-chevron-left"></i>-->
<!--                                    </a>-->
<!--                                </li>-->

<!--                                <li class="page-item"-->
<!--                                    th:each="i : ${#numbers.sequence(0, reviews.totalPages - 1)}"-->
<!--                                    th:classappend="${i == reviews.number} ? 'active'">-->
<!--                                    <a class="page-link"-->
<!--                                       th:href="@{/room-types/{id}(id=${roomType.id}, page=${i})}"-->
<!--                                       th:text="${i + 1}">1</a>-->
<!--                                </li>-->

<!--                                <li class="page-item" th:classappend="${reviews.last} ? 'disabled'">-->
<!--                                    <a class="page-link"-->
<!--                                       th:href="@{/room-types/{id}(id=${roomType.id}, page=${reviews.number + 1})}">-->
<!--                                        <i class="fas fa-chevron-right"></i>-->
<!--                                    </a>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </nav>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; ✅ EMPTY STATE - Hiện khi không có review &ndash;&gt;-->
<!--                    <div class="text-center py-5" th:if="${reviews == null or !reviews.hasContent()}">-->
<!--                        <i class="fas fa-comment-slash fa-3x text-muted mb-3"></i>-->
<!--                        <h5 class="text-muted">Chưa có đánh giá nào</h5>-->
<!--                        <p class="text-muted">Hãy là người đầu tiên đánh giá loại phòng này!</p>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->


<!--    &lt;!&ndash; Similar Rooms &ndash;&gt;-->
<!--    <section class="mt-5" th:if="${!#lists.isEmpty(similarRoomTypes)}">-->
<!--        <h3 class="heading-font mb-4">Phòng tương tự</h3>-->
<!--        <div class="row g-4">-->
<!--            <div class="col-md-4" th:each="similar : ${similarRoomTypes}" th:if="${similar.id != roomType.id}">-->
<!--                <div class="card border-0 shadow-sm">-->
<!--                    <img th:src="${!#lists.isEmpty(similar.roomImages) ? similar.roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}"-->
<!--                         class="card-img-top" style="height: 180px; object-fit: cover;" th:alt="${similar.name}">-->
<!--                    <div class="card-body">-->
<!--                        <h5 class="card-title heading-font" th:text="${similar.name}">Tên phòng</h5>-->
<!--                        <p class="card-text text-muted" th:text="${#strings.abbreviate(similar.description, 50)}">Mô tả phòng</p>-->
<!--                        <div class="amenities-tags mb-3">-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-users me-1"></i>-->
<!--                                <span th:text="${similar.maxOccupancy}">2</span> khách-->
<!--                            </span>-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-bed me-1"></i>-->
<!--                                <span th:text="${similar.bedType}">Double</span>-->
<!--                            </span>-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-expand-arrows-alt me-1"></i>-->
<!--                                <span th:text="${similar.roomSize}">25</span>m²-->
<!--                            </span>-->
<!--                        </div>-->
<!--                        <div class="d-flex justify-content-between align-items-center">-->
<!--                            <span class="text-primary fw-bold" th:text="${similar.formattedPrice + '/đêm'}">Giá/đêm</span>-->
<!--                            <a th:href="@{/room-types/{id}(id=${similar.id})}" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->
<!--</div>-->

<!--&lt;!&ndash; Review Modal &ndash;&gt;-->
<!--<div class="modal fade" id="reviewModal" tabindex="-1">-->
<!--    <div class="modal-dialog modal-dialog-centered">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title">-->
<!--                    <i class="fas fa-star text-warning me-2"></i>-->
<!--                    <span id="modalTitle">Viết đánh giá</span>-->
<!--                </h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <form id="reviewForm">-->
<!--                    <input type="hidden" id="reviewId" name="reviewId">-->

<!--                    <div class="mb-4">-->
<!--                        <label class="form-label text-center w-100 fw-bold">Đánh giá của bạn</label>-->
<!--                        <div class="star-rating text-center" id="starRating" style="font-size: 2rem; cursor: pointer;">-->
<!--                            <i class="far fa-star text-warning" data-rating="1"></i>-->
<!--                            <i class="far fa-star text-warning" data-rating="2"></i>-->
<!--                            <i class="far fa-star text-warning" data-rating="3"></i>-->
<!--                            <i class="far fa-star text-warning" data-rating="4"></i>-->
<!--                            <i class="far fa-star text-warning" data-rating="5"></i>-->
<!--                        </div>-->
<!--                        <input type="hidden" id="rating" name="rating" required>-->
<!--                        <div class="invalid-feedback text-center">Vui lòng chọn số sao đánh giá</div>-->
<!--                    </div>-->

<!--                    <div class="mb-3">-->
<!--                        <label for="comment" class="form-label fw-bold">Chia sẻ trải nghiệm của bạn</label>-->
<!--                        <textarea class="form-control"-->
<!--                                  id="comment"-->
<!--                                  name="comment"-->
<!--                                  rows="5"-->
<!--                                  placeholder="Hãy chia sẻ chi tiết về trải nghiệm của bạn tại đây..."-->
<!--                                  required-->
<!--                                  minlength="10"-->
<!--                                  maxlength="1000"></textarea>-->
<!--                        <small class="text-muted">Tối thiểu 10 ký tự, tối đa 1000 ký tự</small>-->
<!--                        <div class="invalid-feedback">Vui lòng nhập ít nhất 10 ký tự</div>-->
<!--                    </div>-->

<!--                    <div class="d-grid gap-2">-->
<!--                        <button type="submit" class="btn btn-warning btn-lg">-->
<!--                            <i class="fas fa-paper-plane me-2"></i>Gửi đánh giá-->
<!--                        </button>-->
<!--                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">-->
<!--                            Hủy-->
<!--                        </button>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script th:inline="javascript">-->
<!--    const roomTypeId = /*[[${roomType.id}]]*/ 0;-->
<!--    const basePrice = /*[[${roomType.price}]]*/ 0;-->
<!--    // Lấy thông tin từ Thymeleaf-->
<!--    const branchId = /*[[${branch.id}]]*/ 0;-->

<!--    let selectedRating = 0;-->
<!--    let isEditMode = false;-->
<!--    let currentReviewId = null;-->

<!--    // Star rating functionality-->
<!--    const starRating = document.getElementById('starRating');-->
<!--    const ratingInput = document.getElementById('rating');-->
<!--    const stars = starRating.querySelectorAll('i');-->

<!--    stars.forEach(star => {-->
<!--        star.addEventListener('click', function() {-->
<!--            selectedRating = parseInt(this.dataset.rating);-->
<!--            ratingInput.value = selectedRating;-->
<!--            updateStars(selectedRating);-->
<!--        });-->

<!--        star.addEventListener('mouseenter', function() {-->
<!--            const rating = parseInt(this.dataset.rating);-->
<!--            updateStars(rating);-->
<!--        });-->
<!--    });-->

<!--    starRating.addEventListener('mouseleave', function() {-->
<!--        updateStars(selectedRating);-->
<!--    });-->

<!--    function updateStars(rating) {-->
<!--        stars.forEach((star, index) => {-->
<!--            if (index < rating) {-->
<!--                star.classList.remove('far');-->
<!--                star.classList.add('fas', 'active');-->
<!--            } else {-->
<!--                star.classList.remove('fas', 'active');-->
<!--                star.classList.add('far');-->
<!--            }-->
<!--        });-->
<!--    }-->

<!--    // Reset modal when closed-->
<!--    document.getElementById('reviewModal').addEventListener('hidden.bs.modal', function() {-->
<!--        resetForm();-->
<!--    });-->

<!--    function resetForm() {-->
<!--        document.getElementById('reviewForm').reset();-->
<!--        document.getElementById('reviewId').value = '';-->
<!--        document.getElementById('modalTitle').textContent = 'Viết đánh giá';-->
<!--        selectedRating = 0;-->
<!--        updateStars(0);-->
<!--        isEditMode = false;-->
<!--        currentReviewId = null;-->
<!--    }-->

<!--    // Submit review-->
<!--    document.getElementById('reviewForm').addEventListener('submit', async function(e) {-->
<!--        e.preventDefault();-->

<!--        const rating = parseInt(ratingInput.value);-->
<!--        const comment = document.getElementById('comment').value.trim();-->

<!--        // Validation-->
<!--        if (!rating || rating < 1 || rating > 5) {-->
<!--            alert('Vui lòng chọn số sao đánh giá');-->
<!--            return;-->
<!--        }-->

<!--        if (comment.length < 10) {-->
<!--            alert('Vui lòng nhập ít nhất 10 ký tự');-->
<!--            return;-->
<!--        }-->

<!--        if (comment.length > 1000) {-->
<!--            alert('Nội dung đánh giá không được quá 1000 ký tự');-->
<!--            return;-->
<!--        }-->

<!--        const reviewData = {-->
<!--            branchId: branchId,-->
<!--            roomTypeId: roomTypeId,  // ✅ Thêm field này-->
<!--            type: 'ROOM',-->
<!--            rating: rating,-->
<!--            comment: comment-->
<!--        };-->

<!--        try {-->
<!--            let response;-->
<!--            if (isEditMode && currentReviewId) {-->
<!--                // Update existing review-->
<!--                response = await fetch(`/api/reviews/${currentReviewId}`, {-->
<!--                    method: 'PUT',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json',-->
<!--                    },-->
<!--                    body: JSON.stringify(reviewData)-->
<!--                });-->
<!--            } else {-->
<!--                // Create new review-->
<!--                response = await fetch('/api/reviews', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json',-->
<!--                    },-->
<!--                    body: JSON.stringify(reviewData)-->
<!--                });-->
<!--            }-->

<!--            const result = await response.json();-->

<!--            if (response.ok) {-->
<!--                alert(isEditMode ? 'Cập nhật đánh giá thành công!' : 'Gửi đánh giá thành công!');-->
<!--                location.reload();-->
<!--            } else {-->
<!--                alert(result.message || 'Có lỗi xảy ra');-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error('Error:', error);-->
<!--            alert('Có lỗi xảy ra khi gửi đánh giá');-->
<!--        }-->
<!--    });-->

<!--    // Edit review-->
<!--    function editReview(button) {-->
<!--        const reviewId = button.dataset.reviewId;-->
<!--        const rating = parseInt(button.dataset.rating);-->
<!--        const comment = button.dataset.comment;-->

<!--        isEditMode = true;-->
<!--        currentReviewId = reviewId;-->

<!--        document.getElementById('modalTitle').textContent = 'Chỉnh sửa đánh giá';-->
<!--        document.getElementById('reviewId').value = reviewId;-->
<!--        document.getElementById('rating').value = rating;-->
<!--        document.getElementById('comment').value = comment;-->

<!--        selectedRating = rating;-->
<!--        updateStars(rating);-->

<!--        const modal = new bootstrap.Modal(document.getElementById('reviewModal'));-->
<!--        modal.show();-->
<!--    }-->

<!--    // Delete review-->
<!--    async function deleteReview(button) {-->
<!--        if (!confirm('Bạn có chắc chắn muốn xóa đánh giá này?')) {-->
<!--            return;-->
<!--        }-->

<!--        const reviewId = button.dataset.reviewId;-->

<!--        try {-->
<!--            const response = await fetch(`/api/reviews/${reviewId}`, {-->
<!--                method: 'DELETE'-->
<!--            });-->

<!--            const result = await response.json();-->

<!--            if (response.ok) {-->
<!--                alert('Xóa đánh giá thành công!');-->
<!--                location.reload();-->
<!--            } else {-->
<!--                alert(result.message || 'Có lỗi xảy ra');-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error('Error:', error);-->
<!--            alert('Có lỗi xảy ra khi xóa đánh giá');-->
<!--        }-->
<!--    }-->

<!--    const today = new Date().toISOString().split('T')[0];-->
<!--    document.getElementById('checkInDate').setAttribute('min', today);-->

<!--    document.getElementById('checkInDate').addEventListener('change', function() {-->
<!--        const checkInDate = new Date(this.value);-->
<!--        const minCheckOut = new Date(checkInDate);-->
<!--        minCheckOut.setDate(minCheckOut.getDate() + 1);-->

<!--        const minCheckOutStr = minCheckOut.toISOString().split('T')[0];-->
<!--        document.getElementById('checkOutDate').setAttribute('min', minCheckOutStr);-->

<!--        const checkOutInput = document.getElementById('checkOutDate');-->
<!--        if (checkOutInput.value && checkOutInput.value <= this.value) {-->
<!--            checkOutInput.value = '';-->
<!--        }-->

<!--        checkAvailabilityAndPrice();-->
<!--    });-->

<!--    document.getElementById('checkOutDate').addEventListener('change', checkAvailabilityAndPrice);-->
<!--    document.getElementById('numberOfRooms').addEventListener('change', checkAvailabilityAndPrice);-->
<!--    document.getElementById('adults').addEventListener('change', calculatePrice);-->
<!--    document.getElementById('children').addEventListener('change', calculatePrice);-->

<!--    function checkAvailabilityAndPrice() {-->
<!--        const checkInDate = document.getElementById('checkInDate').value;-->
<!--        const checkOutDate = document.getElementById('checkOutDate').value;-->
<!--        const numberOfRooms = document.getElementById('numberOfRooms').value;-->

<!--        if (!checkInDate || !checkOutDate) {-->
<!--            return;-->
<!--        }-->

<!--        fetch(`/bookings/api/check-availability?roomTypeId=${roomTypeId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}&numberOfRooms=${numberOfRooms}`)-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                const availabilityInfo = document.getElementById('availabilityInfo');-->
<!--                const bookingBtn = document.getElementById('bookingBtn');-->

<!--                if (data.available) {-->
<!--                    availabilityInfo.innerHTML = `-->
<!--                        <div class="alert alert-success">-->
<!--                            <i class="fas fa-check-circle me-2"></i>-->
<!--                            ${data.message}-->
<!--                        </div>-->
<!--                    `;-->
<!--                    bookingBtn.disabled = false;-->
<!--                } else {-->
<!--                    availabilityInfo.innerHTML = `-->
<!--                        <div class="alert alert-warning">-->
<!--                            <i class="fas fa-exclamation-triangle me-2"></i>-->
<!--                            ${data.message}-->
<!--                        </div>-->
<!--                    `;-->
<!--                    bookingBtn.disabled = true;-->
<!--                }-->

<!--                calculatePrice();-->
<!--            })-->
<!--            .catch(error => {-->
<!--                console.error('Error:', error);-->
<!--            });-->
<!--    }-->

<!--    function calculatePrice() {-->
<!--        const checkInDate = document.getElementById('checkInDate').value;-->
<!--        const checkOutDate = document.getElementById('checkOutDate').value;-->
<!--        const numberOfRooms = parseInt(document.getElementById('numberOfRooms').value);-->

<!--        if (!checkInDate || !checkOutDate) {-->
<!--            return;-->
<!--        }-->

<!--        const checkIn = new Date(checkInDate);-->
<!--        const checkOut = new Date(checkOutDate);-->
<!--        const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));-->

<!--        if (nights <= 0) {-->
<!--            return;-->
<!--        }-->

<!--        const roomTotal = basePrice * nights * numberOfRooms;-->
<!--        const serviceFee = roomTotal * 0.1;-->
<!--        const vat = (roomTotal + serviceFee) * 0.1;-->
<!--        const total = roomTotal + serviceFee + vat;-->

<!--        document.getElementById('priceText').textContent =-->
<!--            `${formatCurrency(basePrice)} x ${nights} đêm x ${numberOfRooms} phòng`;-->
<!--        document.getElementById('basePrice').textContent = formatCurrency(roomTotal);-->
<!--        document.getElementById('servicePrice').textContent = formatCurrency(serviceFee);-->
<!--        document.getElementById('vatPrice').textContent = formatCurrency(vat);-->
<!--        document.getElementById('totalPrice').textContent = formatCurrency(total);-->
<!--    }-->

<!--    function formatCurrency(amount) {-->
<!--        return new Intl.NumberFormat('vi-VN').format(amount) + '₫';-->
<!--    }-->

<!--    function changeImage(imageUrl, thumbnail) {-->
<!--        document.getElementById('mainImage').src = imageUrl;-->

<!--        document.querySelectorAll('.thumbnail').forEach(t => {-->
<!--            t.classList.remove('active');-->
<!--        });-->

<!--        thumbnail.classList.add('active');-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->





<!--dưới-->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${roomType.name + ' - ' + branch.name}">Chi Tiết Phòng - Luxury Resort</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #c9a96e;
            --secondary-color: #2c3e50;
            --accent-color: #f8f9fa;
            --text-dark: #2c3e50;
            --text-light: #6c757d;
            --bg-overlay: rgba(44, 62, 80, 0.7);
            --scale: 0.75;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: calc(16px * var(--scale));
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            padding-top: calc(80px * var(--scale));
        }

        .heading-font {
            font-family: 'Playfair Display', serif;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.98) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            height: calc(80px * var(--scale));
        }

        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: calc(2rem * var(--scale));
            font-weight: 600;
            color: var(--primary-color) !important;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            margin: 0 calc(10px * var(--scale));
            color: var(--text-dark) !important;
            transition: all 0.3s ease;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: var(--primary-color) !important;
        }

        .btn-luxury {
            background: var(--primary-color);
            color: white;
            padding: calc(12px * var(--scale)) calc(30px * var(--scale));
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            border-radius: calc(50px * var(--scale));
        }

        .btn-luxury:hover {
            background: #b8956b;
            transform: translateY(calc(-3px * var(--scale)));
            box-shadow: 0 10px 25px rgba(201, 169, 110, 0.4);
            color: white;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(var(--bg-overlay), var(--bg-overlay)),
            url('https://images.unsplash.com/photo-1566073771259-6a8506099945') center/cover;
            padding: calc(60px * var(--scale)) 0 calc(40px * var(--scale));
            color: white;
            text-align: center;
            margin-bottom: calc(30px * var(--scale));
        }

        /* Breadcrumb - Scaled */
        .breadcrumb {
            font-size: 0.8rem;
            padding: 8px 12px;
            margin-bottom: 1.5rem;
        }



        /* Gallery */
        .room-gallery {
            height: calc(450px * var(--scale));
            overflow: hidden;
            border-radius: calc(20px * var(--scale));
            margin-bottom: calc(30px * var(--scale));
            position: relative;
        }

        .main-image {
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-thumbnails {
            position: absolute;
            bottom: calc(15px * var(--scale));
            left: calc(15px * var(--scale));
            right: calc(15px * var(--scale));
            display: flex;
            gap: calc(8px * var(--scale));
            overflow-x: auto;
        }

        .thumbnail {
            width: calc(80px * var(--scale));
            height: calc(60px * var(--scale));
            border-radius: calc(8px * var(--scale));
            overflow: hidden;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .thumbnail.active {
            border-color: var(--primary-color);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            top: calc(15px * var(--scale));
            right: calc(15px * var(--scale));
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: calc(8px * var(--scale)) calc(15px * var(--scale));
            border-radius: calc(25px * var(--scale));
            font-weight: 600;
        }

        /* Room Info */
        .room-header {
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: calc(25px * var(--scale));
            margin-bottom: calc(25px * var(--scale));
        }

        .room-title {
            color: var(--text-dark);
            margin-bottom: calc(15px * var(--scale));
            font-size: calc(2rem * var(--scale));
        }

        .room-rating {
            display: flex;
            align-items: center;
            gap: calc(15px * var(--scale));
            margin-bottom: calc(15px * var(--scale));
        }

        .stars {
            color: #ffc107;
        }

        .price-display {
            text-align: right;
        }

        .current-price {
            font-size: calc(2.5rem * var(--scale));
            color: var(--primary-color);
            font-weight: 700;
        }

        .old-price {
            text-decoration: line-through;
            color: var(--text-light);
            font-size: calc(1.2rem * var(--scale));
        }

        .price-note {
            color: var(--text-light);
            font-size: calc(0.9rem * var(--scale));
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(calc(200px * var(--scale)), 1fr));
            gap: calc(20px * var(--scale));
            margin: calc(30px * var(--scale)) 0;
        }

        .feature-item {
            background: white;
            border: 2px solid var(--accent-color);
            border-radius: calc(15px * var(--scale));
            padding: calc(25px * var(--scale));
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            border-color: var(--primary-color);
            transform: translateY(calc(-5px * var(--scale)));
        }

        .feature-icon {
            width: calc(60px * var(--scale));
            height: calc(60px * var(--scale));
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto calc(15px * var(--scale));
            color: white;
            font-size: calc(1.5rem * var(--scale));
        }

        /* Amenities */
        .amenities-section {
            background: var(--accent-color);
            padding: calc(40px * var(--scale));
            border-radius: calc(20px * var(--scale));
            margin: calc(30px * var(--scale)) 0;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(calc(250px * var(--scale)), 1fr));
            gap: calc(20px * var(--scale));
        }

        .amenity-category h6 {
            color: var(--primary-color);
            margin-bottom: calc(15px * var(--scale));
            font-weight: 600;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            margin-bottom: calc(8px * var(--scale));
            font-size: calc(0.95rem * var(--scale));
        }

        .amenity-item i {
            color: var(--primary-color);
            width: calc(20px * var(--scale));
            margin-right: calc(10px * var(--scale));
        }

        /* Booking Widget */
        .booking-widget {
            position: sticky;
            top: calc(100px * var(--scale));
            background: white;
            border-radius: calc(20px * var(--scale));
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: calc(30px * var(--scale));
            border: 2px solid var(--primary-color);
        }

        .booking-widget h5 {
            color: var(--text-dark);
            margin-bottom: calc(25px * var(--scale));
            text-align: center;
        }

        .booking-form .form-label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .booking-form .form-control,
        .booking-form .form-select {
            border: 2px solid #eee;
            border-radius: calc(10px * var(--scale));
            padding: calc(12px * var(--scale)) calc(15px * var(--scale));
            margin-bottom: calc(20px * var(--scale));
        }

        .booking-form .form-control:focus,
        .booking-form .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(201, 169, 110, 0.25);
        }

        .pricing-summary {
            background: var(--accent-color);
            padding: calc(20px * var(--scale));
            border-radius: calc(15px * var(--scale));
            margin: calc(20px * var(--scale)) 0;
        }

        .pricing-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: calc(10px * var(--scale));
        }

        .pricing-row.total {
            font-weight: 700;
            font-size: calc(1.1rem * var(--scale));
            color: var(--primary-color);
            border-top: 1px solid #ddd;
            padding-top: calc(10px * var(--scale));
        }

        /* Review Section */
        .rating-overview {
            background: var(--accent-color);
            padding: calc(25px * var(--scale));
            border-radius: calc(15px * var(--scale));
            margin-bottom: calc(25px * var(--scale));
        }

        .rating-score {
            text-align: center;
            border-right: 1px solid #ddd;
            padding-right: calc(25px * var(--scale));
        }

        .rating-number {
            font-size: calc(3rem * var(--scale));
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .rating-stars {
            color: #ffc107;
            font-size: calc(1.2rem * var(--scale));
            margin: calc(8px * var(--scale)) 0;
        }

        .rating-count {
            color: var(--text-light);
        }

        .rating-bars {
            padding-left: calc(25px * var(--scale));
        }

        .rating-bar-row {
            display: flex;
            align-items: center;
            margin-bottom: calc(8px * var(--scale));
        }

        .rating-bar-label {
            width: calc(60px * var(--scale));
            color: var(--text-dark);
        }

        .rating-bar-bg {
            flex: 1;
            height: calc(8px * var(--scale));
            background: #e0e0e0;
            border-radius: calc(4px * var(--scale));
            overflow: hidden;
            margin: 0 calc(10px * var(--scale));
        }

        .rating-bar-fill {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .rating-bar-count {
            width: calc(40px * var(--scale));
            text-align: right;
            color: var(--text-light);
        }

        .review-card {
            background: white;
            border-radius: calc(12px * var(--scale));
            padding: calc(20px * var(--scale));
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: calc(15px * var(--scale));
            position: relative;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            margin-bottom: calc(12px * var(--scale));
        }

        .reviewer-avatar {
            width: calc(45px * var(--scale));
            height: calc(45px * var(--scale));
            border-radius: 50%;
            object-fit: cover;
            margin-right: calc(12px * var(--scale));
        }

        .reviewer-name {
            font-weight: 600;
            margin-bottom: calc(3px * var(--scale));
        }

        .review-date {
            color: var(--text-light);
            font-size: calc(0.85rem * var(--scale));
        }

        .review-rating {
            color: #ffc107;
            margin-bottom: calc(12px * var(--scale));
        }

        .staff-response {
            background: #f8f9fa;
            border-left: 3px solid var(--primary-color);
            padding: calc(12px * var(--scale)) calc(15px * var(--scale));
            margin-top: calc(12px * var(--scale));
            border-radius: calc(5px * var(--scale));
        }

        .staff-response-header {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: calc(5px * var(--scale));
        }

        /* Tabs */
        .nav-tabs {
            border: none;
            margin-bottom: calc(30px * var(--scale));
        }

        .nav-tabs .nav-link {
            border: none;
            background: none;
            color: var(--text-light);
            font-weight: 600;
            padding: calc(15px * var(--scale)) calc(25px * var(--scale));
            border-radius: calc(25px * var(--scale));
            margin-right: calc(10px * var(--scale));
        }

        .nav-tabs .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        /* Modal */
        .modal-content {
            border-radius: calc(15px * var(--scale));
            border: none;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), #d4b079);
            color: white;
            border-radius: calc(15px * var(--scale)) calc(15px * var(--scale)) 0 0;
            padding: calc(20px * var(--scale)) calc(25px * var(--scale));
        }

        .star-rating {
            display: flex;
            gap: calc(10px * var(--scale));
            justify-content: center;
            margin: calc(20px * var(--scale)) 0;
        }

        .star-rating i {
            font-size: calc(2rem * var(--scale));
            color: #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }

        .star-rating i:hover,
        .star-rating i.active {
            color: #ffc107;
            transform: scale(1.1);
        }

        /* Similar Rooms */
        .card {
            border: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-radius: calc(15px * var(--scale));
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(calc(-5px * var(--scale)));
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .card-img-top {
            height: calc(200px * var(--scale));
            object-fit: cover;
        }

        .amenity-tag {
            display: inline-block;
            padding: calc(5px * var(--scale)) calc(12px * var(--scale));
            background: var(--accent-color);
            border-radius: calc(15px * var(--scale));
            margin-right: calc(6px * var(--scale));
            margin-bottom: calc(6px * var(--scale));
            font-size: calc(0.85rem * var(--scale));
        }

        /* Responsive */
        @media (max-width: 991px) {
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            :root {
                --scale: 0.65;
            }

            .room-gallery {
                height: calc(300px * var(--scale));
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .booking-widget {
                position: static;
                margin-top: calc(20px * var(--scale));
            }

            .price-display {
                text-align: left;
                margin-top: calc(15px * var(--scale));
            }

            .rating-score {
                border-right: none;
                border-bottom: 1px solid #ddd;
                padding-right: 0;
                padding-bottom: calc(20px * var(--scale));
                margin-bottom: calc(20px * var(--scale));
            }

            .rating-bars {
                padding-left: 0;
            }
        }

        /* Animation */
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(calc(20px * var(--scale))); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>
<!-- Navigation -->
<div th:replace="fragments/user_navbar :: user_navbar"></div>

<nav th:fragment="user_navbar" class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}"><i class="fas fa-crown me-2"></i>DIEK</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">Trang chủ</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/#branches}">Chi nhánh</a></li>
                <li class="nav-item"><a class="nav-link" href="#facilities">Tiện ích</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">Liên hệ</a></li>

                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link btn btn-outline-primary ms-2" th:href="@{/customer/login}">
                        <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập
                    </a>
                </li>

                <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user-circle me-1"></i>
                        <span sec:authentication="name">Username</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <a class="dropdown-item" th:href="@{/cart}">
                                <i class="fas fa-shopping-cart fa-fw me-2"></i>Giỏ hàng
                                <span class="badge bg-danger rounded-pill" th:if="${session.cartItemCount > 0}" th:text="${session.cartItemCount}">0</span>
                            </a>
                        </li>
                        <li><a class="dropdown-item" th:href="@{/orders}"><i class="fas fa-receipt fa-fw me-2"></i>Xem đơn hàng</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <form th:action="@{/logout}" method="post" class="d-inline">
                                <button type="submit" class="dropdown-item">
                                    <i class="fas fa-sign-out-alt fa-fw me-2"></i>Đăng xuất
                                </button>
                            </form>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Main Content -->
<section class="py-0">
    <div class="container">
        <div class="row">
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>
                    <li class="breadcrumb-item"><a th:href="@{/branches/{id}(id=${branch.id})}" th:text="${branch.name}">Chi nhánh</a></li>
                    <li class="breadcrumb-item active" th:text="${roomType.name}">Loại phòng</li>
                </ol>
            </nav>
            <!-- Left Column -->
            <div class="col-lg-8">
                <!-- Gallery -->
                <div class="room-gallery fade-in">
                    <div class="main-image">
                        <img id="mainImage"
                             th:src="${!#lists.isEmpty(roomImages) ? roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b'}"
                             th:alt="${roomType.name}">

                        <div class="gallery-overlay">
                            <i class="fas fa-camera me-2"></i>
                            <span th:text="${#lists.size(roomImages)}">0</span> ảnh
                        </div>

                        <div class="gallery-thumbnails">
                            <div class="thumbnail"
                                 th:each="image, iterStat : ${roomImages}"
                                 th:classappend="${iterStat.first} ? 'active' : ''"
                                 th:data-image-url="${image.imageUrl}"
                                 onclick="changeImage(this.dataset.imageUrl, this)">
                                <img th:src="${image.imageUrl}" th:alt="${image.imageTitle}">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Room Header -->
                <div class="room-header fade-in">
                    <div class="row align-items-end">
                        <div class="col-md-8">
                            <h1 class="room-title heading-font" th:text="${roomType.name}">Tên loại phòng</h1>
                            <div class="room-rating">
                                <div class="stars">
                                    <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, 5)}"></i>
                                </div>
                                <span class="fw-semibold">4.8/5</span>
                                <span class="text-muted">(124 đánh giá)</span>
                            </div>
                            <p class="lead text-muted" th:text="${roomType.description}">Mô tả loại phòng</p>
                        </div>
                        <div class="col-md-4 price-display">
                            <div class="old-price"
                                 th:if="${roomType.originalPrice != null and roomType.originalPrice > roomType.currentPrice}"
                                 th:text="${#numbers.formatDecimal(roomType.originalPrice, 0, 'COMMA', 0, 'POINT') + '₫'}">
                            </div>
                            <div class="current-price" th:text="${roomType.formattedPrice}">Giá phòng</div>
                            <div class="price-note">/ đêm (chưa bao gồm thuế)</div>
                        </div>
                    </div>
                </div>

                <!-- Features -->
                <div class="features-grid fade-in">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <h6 th:text="${roomType.bedType}">Loại giường</h6>
                        <p class="mb-0 text-muted">Giường cao cấp</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h6><span th:text="${roomType.maxOccupancy}">0</span> Khách</h6>
                        <p class="mb-0 text-muted">Số người tối đa</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-ruler"></i>
                        </div>
                        <h6><span th:text="${roomType.roomSize}">0</span>m²</h6>
                        <p class="mb-0 text-muted">Diện tích phòng</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h6 th:text="${roomType.viewType ?: 'City View'}">Tầm nhìn</h6>
                        <p class="mb-0 text-muted">View từ phòng</p>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="fade-in">
                    <ul class="nav nav-tabs" id="roomTabs">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#amenities">
                                <i class="fas fa-concierge-bell me-2"></i>Tiện nghi
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#policies">
                                <i class="fas fa-file-contract me-2"></i>Chính sách
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviews">
                                <i class="fas fa-star me-2"></i>Đánh giá
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="amenities">
                            <div class="amenities-section">
                                <div class="amenities-grid">
                                    <div class="amenity-category" th:if="${roomType.amenities != null}">
                                        <h6><i class="fas fa-concierge-bell me-2"></i>Tiện nghi phòng</h6>
                                        <div class="amenity-item" th:each="amenity : ${#strings.listSplit(roomType.amenities, ',')}">
                                            <i class="fas fa-check"></i>
                                            <span th:text="${#strings.trim(amenity)}">Tiện nghi</span>
                                        </div>
                                    </div>

                                    <div class="amenity-category">
                                        <h6><i class="fas fa-bed me-2"></i>Phòng ngủ</h6>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i>
                                            <span th:text="${roomType.bedType + ' cao cấp'}">Giường cao cấp</span>
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Ga giường cotton cao cấp
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Gối memory foam
                                        </div>
                                    </div>

                                    <div class="amenity-category">
                                        <h6><i class="fas fa-bath me-2"></i>Phòng tắm</h6>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Vòi hoa sen mưa
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Đồ dùng vệ sinh cao cấp
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Áo choàng tắm & dép
                                        </div>
                                    </div>

                                    <div class="amenity-category">
                                        <h6><i class="fas fa-wifi me-2"></i>Công nghệ</h6>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> WiFi tốc độ cao miễn phí
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Smart TV
                                        </div>
                                        <div class="amenity-item">
                                            <i class="fas fa-check"></i> Điều hòa thông minh
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="policies">
                            <div class="amenities-section">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-clock me-2 text-primary"></i>Thời gian</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2"><i class="fas fa-sign-in-alt me-2 text-success"></i> Check-in: 15:00</li>
                                            <li class="mb-2"><i class="fas fa-sign-out-alt me-2 text-danger"></i> Check-out: 12:00</li>
                                            <li class="mb-2"><i class="fas fa-calendar me-2 text-info"></i> Check-in sớm có thể được sắp xếp</li>
                                        </ul>

                                        <h6 class="mt-4"><i class="fas fa-ban me-2 text-danger"></i>Hủy phòng</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Hủy miễn phí trước 24h</li>
                                            <li class="mb-2">• Hủy trong vòng 24h: phí 50%</li>
                                            <li class="mb-2">• No-show: tính 100% phí phòng</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-info-circle me-2 text-info"></i>Thông tin khác</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Không hút thuốc</li>
                                            <li class="mb-2">• Đảm bảo thẻ tín dụng khi check-in</li>
                                            <li class="mb-2">• Phí phụ thu cho khách vượt quá</li>
                                            <li class="mb-2">• Dịch vụ dọn phòng hàng ngày</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="reviews">
                            <div class="review-card">
                                <div class="reviewer-info">
                                    <img src="https://images.unsplash.com/photo-1494790108755-2616b612b605?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Reviewer" class="reviewer-avatar">
                                    <div>
                                        <div class="reviewer-name">Nguyễn Minh Anh</div>
                                        <div class="review-date">15 tháng 8, 2024</div>
                                    </div>
                                </div>
                                <div class="review-rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <p>"Phòng tuyệt vời với thiết kế hiện đại. Dịch vụ chu đáo, nhân viên thân thiện. Sẽ quay lại lần sau!"</p>
                            </div>

                            <button class="btn btn-outline-primary">Xem thêm đánh giá</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="booking-widget fade-in">
                    <h5><i class="fas fa-calendar-check me-2"></i>Đặt phòng ngay</h5>

                    <form class="booking-form"
                          th:action="@{/bookings/room-type/{id}/select(id=${roomType.id})}"
                          method="post">

                        <div class="row g-3">
                            <div class="col-12">
                                <label class="form-label">
                                    <i class="fas fa-calendar-alt me-1"></i>Ngày nhận phòng
                                </label>
                                <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>
                            </div>

                            <div class="col-12">
                                <label class="form-label">
                                    <i class="fas fa-calendar-alt me-1"></i>Ngày trả phòng
                                </label>
                                <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>
                            </div>

                            <div class="col-12">
                                <label class="form-label">
                                    <i class="fas fa-door-open me-1"></i>Số lượng phòng
                                </label>
                                <select class="form-select" name="numberOfRooms" id="numberOfRooms" required>
                                    <option value="1" selected>1 phòng</option>
                                    <option value="2">2 phòng</option>
                                    <option value="3">3 phòng</option>
                                    <option value="4">4 phòng</option>
                                    <option value="5">5 phòng</option>
                                </select>
                                <small class="text-muted">Tối đa 5 phòng/lần đặt</small>
                            </div>

                            <div class="col-6">
                                <label class="form-label">
                                    <i class="fas fa-user me-1"></i>Người lớn
                                </label>
                                <select class="form-select" name="adults" id="adults" required>
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3" th:if="${roomType.maxOccupancy >= 3}">3</option>
                                    <option value="4" th:if="${roomType.maxOccupancy >= 4}">4</option>
                                </select>
                            </div>

                            <div class="col-6">
                                <label class="form-label">
                                    <i class="fas fa-child me-1"></i>Trẻ em
                                </label>
                                <select class="form-select" name="children" id="children">
                                    <option value="0" selected>0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>
                        </div>

                        <div id="availabilityInfo" class="mt-3"></div>

                        <div class="pricing-summary mt-3">
                            <div class="pricing-row">
                                <span id="priceText" th:text="${roomType.formattedPrice + ' x 1 đêm x 1 phòng'}"></span>
                                <span id="basePrice" th:text="${roomType.formattedPrice}">0₫</span>
                            </div>
                            <div class="pricing-row">
                                <span>Phí dịch vụ (10%)</span>
                                <span id="servicePrice">0₫</span>
                            </div>
                            <div class="pricing-row">
                                <span>Thuế VAT (10%)</span>
                                <span id="vatPrice">0₫</span>
                            </div>
                            <div class="pricing-row total">
                                <span>Tổng cộng</span>
                                <span id="totalPrice" th:text="${roomType.formattedPrice}">0₫</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-luxury w-100 mt-3" id="bookingBtn">
                            <i class="fas fa-arrow-right me-2"></i>Tiếp tục
                        </button>

                        <div class="text-center mt-3">
                            <small class="text-muted">
                                <i class="fas fa-shield-alt me-1"></i>
                                Không tính phí cho đến khi xác nhận
                            </small>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- ✅ SECTION ĐÁNH GIÁ - Copy thay thế phần cũ trong detail.html -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <h3 class="heading-font mb-4">
                            <i class="fas fa-star text-warning me-2"></i>Đánh giá từ khách hàng
                        </h3>

                        <!-- ✅ DEBUG INFO - XÓA SAU KHI TEST XONG -->
                        <div class="alert alert-info">
                            <strong>🔍 DEBUG INFO:</strong><br>
                            Total Reviews: <span th:text="${reviewStats.totalReviews}">0</span><br>
                            Average Rating: <span th:text="${reviewStats.averageRating}">0.0</span><br>
                            Has Content: <span th:text="${reviews != null ? reviews.hasContent() : false}">false</span><br>
                            Number of Elements: <span th:text="${reviews != null ? reviews.numberOfElements : 0}">0</span><br>
                            Total Pages: <span th:text="${reviews != null ? reviews.totalPages : 0}">0</span>
                        </div>

                        <!-- Rating Overview -->
                        <div class="rating-overview mb-4">
                            <div class="row">
                                <div class="col-md-3 text-center">
                                    <div class="rating-score">
                                        <div class="rating-number display-4 fw-bold text-warning"
                                             th:text="${#numbers.formatDecimal(reviewStats.averageRating, 1, 1)}">0.0</div>
                                        <div class="rating-stars mb-2">
                                            <i class="fas fa-star text-warning" th:each="i : ${#numbers.sequence(1, 5)}"></i>
                                        </div>
                                        <div class="text-muted">
                                            <span th:text="${reviewStats.totalReviews}">0</span> đánh giá
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="rating-bars">
                                        <!-- 5 stars -->
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="rating-bar-label" style="width: 60px;">
                                                5 <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <div class="progress flex-grow-1 mx-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating5Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">
                                                </div>
                                            </div>
                                            <div class="rating-bar-count" style="width: 40px; text-align: right;"
                                                 th:text="${reviewStats.rating5Count}">0</div>
                                        </div>

                                        <!-- 4 stars -->
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="rating-bar-label" style="width: 60px;">
                                                4 <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <div class="progress flex-grow-1 mx-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating4Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">
                                                </div>
                                            </div>
                                            <div class="rating-bar-count" style="width: 40px; text-align: right;"
                                                 th:text="${reviewStats.rating4Count}">0</div>
                                        </div>

                                        <!-- 3 stars -->
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="rating-bar-label" style="width: 60px;">
                                                3 <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <div class="progress flex-grow-1 mx-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating3Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">
                                                </div>
                                            </div>
                                            <div class="rating-bar-count" style="width: 40px; text-align: right;"
                                                 th:text="${reviewStats.rating3Count}">0</div>
                                        </div>

                                        <!-- 2 stars -->
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="rating-bar-label" style="width: 60px;">
                                                2 <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <div class="progress flex-grow-1 mx-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating2Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">
                                                </div>
                                            </div>
                                            <div class="rating-bar-count" style="width: 40px; text-align: right;"
                                                 th:text="${reviewStats.rating2Count}">0</div>
                                        </div>

                                        <!-- 1 star -->
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="rating-bar-label" style="width: 60px;">
                                                1 <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <div class="progress flex-grow-1 mx-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${reviewStats.totalReviews > 0 ? (reviewStats.rating1Count * 100.0 / reviewStats.totalReviews) : 0} + '%'">
                                                </div>
                                            </div>
                                            <div class="rating-bar-count" style="width: 40px; text-align: right;"
                                                 th:text="${reviewStats.rating1Count}">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Write Review Button -->
                        <div class="text-center mb-4 p-3 bg-light rounded">
                            <button th:if="${isLoggedIn and isCustomer and canReview and userReview == null}"
                                    class="btn btn-lg btn-warning"
                                    data-bs-toggle="modal"
                                    data-bs-target="#reviewModal">
                                <i class="fas fa-pen me-2"></i>Viết đánh giá của bạn
                            </button>

                            <div th:if="${isLoggedIn and isCustomer and userReview != null}"
                                 class="alert alert-success d-inline-block mb-0">
                                <i class="fas fa-check-circle me-2"></i>
                                Bạn đã đánh giá loại phòng này
                            </div>

                            <div th:if="${!isLoggedIn}" class="alert alert-info d-inline-block mb-0">
                                <i class="fas fa-info-circle me-2"></i>
                                Vui lòng <a th:href="@{/customer/login}" class="fw-bold text-decoration-underline">đăng nhập</a> để viết đánh giá
                            </div>

                            <div th:if="${isLoggedIn and !isCustomer}"
                                 class="alert alert-warning d-inline-block mb-0">
                                <i class="fas fa-user-shield me-2"></i>
                                Chỉ khách hàng mới có thể đánh giá
                            </div>

                            <div th:if="${isLoggedIn and isCustomer and !canReview and userReview == null}"
                                 class="alert alert-warning d-inline-block mb-0">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                Bạn cần trải nghiệm dịch vụ để có thể đánh giá
                            </div>
                        </div>

                        <!-- ✅ DANH SÁCH ĐÁNH GIÁ - KIỂM TRA KỸ ĐIỀU KIỆN -->
                        <div th:if="${reviews != null and reviews.hasContent()}" class="reviews-list">
                            <h5 class="mb-3">
                                Tất cả đánh giá (<span th:text="${reviews.totalElements}">0</span>)
                            </h5>

                            <!-- Loop qua từng review -->
                            <div class="review-card border rounded p-3 mb-3" th:each="review : ${reviews.content}">
                                <div class="d-flex align-items-start">
                                    <!-- Avatar -->
                                    <img th:src="${review.avatarUrl != null and review.avatarUrl != '' ? review.avatarUrl : 'https://ui-avatars.com/api/?name=' + review.customerName + '&background=c9a96e&color=fff&size=80&bold=true'}"
                                         alt="Avatar"
                                         class="rounded-circle me-3"
                                         style="width: 50px; height: 50px; object-fit: cover;">

                                    <div class="flex-grow-1">
                                        <!-- Header -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div>
                                                <div class="fw-bold" th:text="${review.customerName}">Tên khách hàng</div>
                                                <small class="text-muted" th:text="${review.formattedDate}">01/01/2024 10:00</small>
                                            </div>

                                            <!-- Action buttons - chỉ hiển thị cho chủ nhân -->
                                            <div th:if="${isLoggedIn and isCustomer and currentUser != null and currentUser.id == review.customerId}"
                                                 class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                        onclick="editReview(this)"
                                                        th:attr="data-review-id=${review.id},data-rating=${review.rating},data-comment=${review.comment}"
                                                        title="Sửa đánh giá">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger"
                                                        onclick="deleteReview(this)"
                                                        th:attr="data-review-id=${review.id}"
                                                        title="Xóa đánh giá">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Rating -->
                                        <div class="review-rating mb-2">
                                            <th:block th:each="i : ${#numbers.sequence(1, review.rating)}">
                                                <i class="fas fa-star text-warning"></i>
                                            </th:block>
                                            <th:block th:each="i : ${#numbers.sequence(review.rating + 1, 5)}">
                                                <i class="far fa-star text-warning"></i>
                                            </th:block>
                                        </div>

                                        <!-- Comment -->
                                        <p class="mb-2" th:text="${review.comment}">Nội dung đánh giá...</p>

                                        <!-- Staff Response -->
                                        <div class="staff-response bg-light p-3 rounded mt-2"
                                             th:if="${review.staffResponse != null and review.staffResponse != ''}">
                                            <div class="fw-bold text-primary mb-1">
                                                <i class="fas fa-reply me-1"></i>Phản hồi từ khách sạn
                                            </div>
                                            <p class="mb-0" th:text="${review.staffResponse}">Phản hồi...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pagination -->
                            <nav th:if="${reviews.totalPages > 1}" class="mt-4">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item" th:classappend="${reviews.first} ? 'disabled'">
                                        <a class="page-link"
                                           th:href="@{/room-types/{id}(id=${roomType.id}, page=${reviews.number - 1})}">
                                            <i class="fas fa-chevron-left"></i>
                                        </a>
                                    </li>

                                    <li class="page-item"
                                        th:each="i : ${#numbers.sequence(0, reviews.totalPages - 1)}"
                                        th:classappend="${i == reviews.number} ? 'active'">
                                        <a class="page-link"
                                           th:href="@{/room-types/{id}(id=${roomType.id}, page=${i})}"
                                           th:text="${i + 1}">1</a>
                                    </li>

                                    <li class="page-item" th:classappend="${reviews.last} ? 'disabled'">
                                        <a class="page-link"
                                           th:href="@{/room-types/{id}(id=${roomType.id}, page=${reviews.number + 1})}">
                                            <i class="fas fa-chevron-right"></i>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>

                        <!-- ✅ EMPTY STATE - Hiện khi không có review -->
                        <div class="text-center py-5" th:if="${reviews == null or !reviews.hasContent()}">
                            <i class="fas fa-comment-slash fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">Chưa có đánh giá nào</h5>
                            <p class="text-muted">Hãy là người đầu tiên đánh giá loại phòng này!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Similar Rooms -->
        <section class="mt-5" th:if="${!#lists.isEmpty(similarRoomTypes)}">
            <h3 class="heading-font mb-4">Phòng tương tự</h3>
            <div class="row g-4">
                <div class="col-md-4" th:each="similar : ${similarRoomTypes}" th:if="${similar.id != roomType.id}">
                    <div class="card border-0 shadow-sm">
                        <img th:src="${!#lists.isEmpty(similar.roomImages) ? similar.roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}"
                             class="card-img-top" style="height: 180px; object-fit: cover;" th:alt="${similar.name}">
                        <div class="card-body">
                            <h5 class="card-title heading-font" th:text="${similar.name}">Tên phòng</h5>
                            <p class="card-text text-muted" th:text="${#strings.abbreviate(similar.description, 50)}">Mô tả phòng</p>
                            <div class="amenities-tags mb-3">
                            <span class="amenity-tag">
                                <i class="fas fa-users me-1"></i>
                                <span th:text="${similar.maxOccupancy}">2</span> khách
                            </span>
                                <span class="amenity-tag">
                                <i class="fas fa-bed me-1"></i>
                                <span th:text="${similar.bedType}">Double</span>
                            </span>
                                <span class="amenity-tag">
                                <i class="fas fa-expand-arrows-alt me-1"></i>
                                <span th:text="${similar.roomSize}">25</span>m²
                            </span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-primary fw-bold" th:text="${similar.formattedPrice + '/đêm'}">Giá/đêm</span>
                                <a th:href="@{/room-types/{id}(id=${similar.id})}" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</section>

    <!-- Review Modal -->
    <div class="modal fade" id="reviewModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-star text-warning me-2"></i>
                        <span id="modalTitle">Viết đánh giá</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <input type="hidden" id="reviewId" name="reviewId">

                        <div class="mb-4">
                            <label class="form-label text-center w-100 fw-bold">Đánh giá của bạn</label>
                            <div class="star-rating text-center" id="starRating" style="font-size: 2rem; cursor: pointer;">
                                <i class="far fa-star text-warning" data-rating="1"></i>
                                <i class="far fa-star text-warning" data-rating="2"></i>
                                <i class="far fa-star text-warning" data-rating="3"></i>
                                <i class="far fa-star text-warning" data-rating="4"></i>
                                <i class="far fa-star text-warning" data-rating="5"></i>
                            </div>
                            <input type="hidden" id="rating" name="rating" required>
                            <div class="invalid-feedback text-center">Vui lòng chọn số sao đánh giá</div>
                        </div>

                        <div class="mb-3">
                            <label for="comment" class="form-label fw-bold">Chia sẻ trải nghiệm của bạn</label>
                            <textarea class="form-control"
                                      id="comment"
                                      name="comment"
                                      rows="5"
                                      placeholder="Hãy chia sẻ chi tiết về trải nghiệm của bạn tại đây..."
                                      required
                                      minlength="10"
                                      maxlength="1000"></textarea>
                            <small class="text-muted">Tối thiểu 10 ký tự, tối đa 1000 ký tự</small>
                            <div class="invalid-feedback">Vui lòng nhập ít nhất 10 ký tự</div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-warning btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>Gửi đánh giá
                            </button>
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                Hủy
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script th:inline="javascript">
        const roomTypeId = /*[[${roomType.id}]]*/ 0;
        const basePrice = /*[[${roomType.price}]]*/ 0;
        // Lấy thông tin từ Thymeleaf
        const branchId = /*[[${branch.id}]]*/ 0;

        let selectedRating = 0;
        let isEditMode = false;
        let currentReviewId = null;

        // Star rating functionality
        const starRating = document.getElementById('starRating');
        const ratingInput = document.getElementById('rating');
        const stars = starRating.querySelectorAll('i');

        stars.forEach(star => {
            star.addEventListener('click', function() {
                selectedRating = parseInt(this.dataset.rating);
                ratingInput.value = selectedRating;
                updateStars(selectedRating);
            });

            star.addEventListener('mouseenter', function() {
                const rating = parseInt(this.dataset.rating);
                updateStars(rating);
            });
        });

        starRating.addEventListener('mouseleave', function() {
            updateStars(selectedRating);
        });

        function updateStars(rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('far');
                    star.classList.add('fas', 'active');
                } else {
                    star.classList.remove('fas', 'active');
                    star.classList.add('far');
                }
            });
        }

        // Reset modal when closed
        document.getElementById('reviewModal').addEventListener('hidden.bs.modal', function() {
            resetForm();
        });

        function resetForm() {
            document.getElementById('reviewForm').reset();
            document.getElementById('reviewId').value = '';
            document.getElementById('modalTitle').textContent = 'Viết đánh giá';
            selectedRating = 0;
            updateStars(0);
            isEditMode = false;
            currentReviewId = null;
        }

        // Submit review
        document.getElementById('reviewForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const rating = parseInt(ratingInput.value);
            const comment = document.getElementById('comment').value.trim();

            // Validation
            if (!rating || rating < 1 || rating > 5) {
                alert('Vui lòng chọn số sao đánh giá');
                return;
            }

            if (comment.length < 10) {
                alert('Vui lòng nhập ít nhất 10 ký tự');
                return;
            }

            if (comment.length > 1000) {
                alert('Nội dung đánh giá không được quá 1000 ký tự');
                return;
            }

            const reviewData = {
                branchId: branchId,
                roomTypeId: roomTypeId,  // ✅ Thêm field này
                type: 'ROOM',
                rating: rating,
                comment: comment
            };

            try {
                let response;
                if (isEditMode && currentReviewId) {
                    // Update existing review
                    response = await fetch(`/api/reviews/${currentReviewId}`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(reviewData)
                    });
                } else {
                    // Create new review
                    response = await fetch('/api/reviews', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(reviewData)
                    });
                }

                const result = await response.json();

                if (response.ok) {
                    alert(isEditMode ? 'Cập nhật đánh giá thành công!' : 'Gửi đánh giá thành công!');
                    location.reload();
                } else {
                    alert(result.message || 'Có lỗi xảy ra');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Có lỗi xảy ra khi gửi đánh giá');
            }
        });

        // Edit review
        function editReview(button) {
            const reviewId = button.dataset.reviewId;
            const rating = parseInt(button.dataset.rating);
            const comment = button.dataset.comment;

            isEditMode = true;
            currentReviewId = reviewId;

            document.getElementById('modalTitle').textContent = 'Chỉnh sửa đánh giá';
            document.getElementById('reviewId').value = reviewId;
            document.getElementById('rating').value = rating;
            document.getElementById('comment').value = comment;

            selectedRating = rating;
            updateStars(rating);

            const modal = new bootstrap.Modal(document.getElementById('reviewModal'));
            modal.show();
        }

        // Delete review
        async function deleteReview(button) {
            if (!confirm('Bạn có chắc chắn muốn xóa đánh giá này?')) {
                return;
            }

            const reviewId = button.dataset.reviewId;

            try {
                const response = await fetch(`/api/reviews/${reviewId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Xóa đánh giá thành công!');
                    location.reload();
                } else {
                    alert(result.message || 'Có lỗi xảy ra');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Có lỗi xảy ra khi xóa đánh giá');
            }
        }

        const today = new Date().toISOString().split('T')[0];
        document.getElementById('checkInDate').setAttribute('min', today);

        document.getElementById('checkInDate').addEventListener('change', function() {
            const checkInDate = new Date(this.value);
            const minCheckOut = new Date(checkInDate);
            minCheckOut.setDate(minCheckOut.getDate() + 1);

            const minCheckOutStr = minCheckOut.toISOString().split('T')[0];
            document.getElementById('checkOutDate').setAttribute('min', minCheckOutStr);

            const checkOutInput = document.getElementById('checkOutDate');
            if (checkOutInput.value && checkOutInput.value <= this.value) {
                checkOutInput.value = '';
            }

            checkAvailabilityAndPrice();
        });

        document.getElementById('checkOutDate').addEventListener('change', checkAvailabilityAndPrice);
        document.getElementById('numberOfRooms').addEventListener('change', checkAvailabilityAndPrice);
        document.getElementById('adults').addEventListener('change', calculatePrice);
        document.getElementById('children').addEventListener('change', calculatePrice);

        function checkAvailabilityAndPrice() {
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            const numberOfRooms = document.getElementById('numberOfRooms').value;

            if (!checkInDate || !checkOutDate) {
                return;
            }

            fetch(`/bookings/api/check-availability?roomTypeId=${roomTypeId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}&numberOfRooms=${numberOfRooms}`)
                .then(response => response.json())
                .then(data => {
                    const availabilityInfo = document.getElementById('availabilityInfo');
                    const bookingBtn = document.getElementById('bookingBtn');

                    if (data.available) {
                        availabilityInfo.innerHTML = `
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle me-2"></i>
                            ${data.message}
                        </div>
                    `;
                        bookingBtn.disabled = false;
                    } else {
                        availabilityInfo.innerHTML = `
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            ${data.message}
                        </div>
                    `;
                        bookingBtn.disabled = true;
                    }

                    calculatePrice();
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        function calculatePrice() {
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            const numberOfRooms = parseInt(document.getElementById('numberOfRooms').value);

            if (!checkInDate || !checkOutDate) {
                return;
            }

            const checkIn = new Date(checkInDate);
            const checkOut = new Date(checkOutDate);
            const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));

            if (nights <= 0) {
                return;
            }

            const roomTotal = basePrice * nights * numberOfRooms;
            const serviceFee = roomTotal * 0.1;
            const vat = (roomTotal + serviceFee) * 0.1;
            const total = roomTotal + serviceFee + vat;

            document.getElementById('priceText').textContent =
                `${formatCurrency(basePrice)} x ${nights} đêm x ${numberOfRooms} phòng`;
            document.getElementById('basePrice').textContent = formatCurrency(roomTotal);
            document.getElementById('servicePrice').textContent = formatCurrency(serviceFee);
            document.getElementById('vatPrice').textContent = formatCurrency(vat);
            document.getElementById('totalPrice').textContent = formatCurrency(total);
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN').format(amount) + '₫';
        }

        function changeImage(imageUrl, thumbnail) {
            document.getElementById('mainImage').src = imageUrl;

            document.querySelectorAll('.thumbnail').forEach(t => {
                t.classList.remove('active');
            });

            thumbnail.classList.add('active');
        }
    </script>

</body>
</html>
