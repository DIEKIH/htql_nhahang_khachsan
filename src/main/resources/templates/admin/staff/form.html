

<!--<!DOCTYPE html>-->
<!--<html lang="vi" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${userId != null ? 'Chỉnh sửa Nhân viên' : 'Thêm Nhân viên'}">Thêm Nhân viên</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" th:href="@{/css/admin_sidebar.css}">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--        }-->

<!--        .navbar {-->
<!--            background-color: #fff;-->
<!--            box-shadow: 0 2px 4px rgba(0,0,0,0.1);-->
<!--            padding: 1rem 0;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--        }-->

<!--        .page-header {-->
<!--            background-color: #fff;-->
<!--            border-radius: 8px;-->
<!--            padding: 1.5rem;-->
<!--            margin-bottom: 1.5rem;-->
<!--            box-shadow: 0 2px 4px rgba(0,0,0,0.05);-->
<!--        }-->

<!--        /*.form-container {*/-->
<!--        /*    background-color: #fff;*/-->
<!--        /*    border-radius: 8px;*/-->
<!--        /*    padding: 2rem;*/-->
<!--        /*    box-shadow: 0 2px 4px rgba(0,0,0,0.05);*/-->
<!--        /*    margin-bottom: 2rem;*/-->
<!--        /*}*/-->

<!--        .section-title {-->
<!--            font-size: 1.25rem;-->
<!--            font-weight: 600;-->
<!--            color: #333;-->
<!--            margin-bottom: 1.5rem;-->
<!--            padding-bottom: 0.75rem;-->
<!--            border-bottom: 1px solid #e9ecef;-->
<!--        }-->

<!--        .form-container {-->
<!--            background-color: white;-->
<!--            border-radius: 0.5rem;-->
<!--            padding: 2rem;-->
<!--            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);-->
<!--        }-->
<!--        /*.form-label {*/-->
<!--        /*    font-weight: 500;*/-->
<!--        /*    margin-bottom: 0.5rem;*/-->
<!--        /*}*/-->

<!--        .form-label {-->
<!--            font-weight: 500;-->
<!--            margin-bottom: 0.5rem;-->
<!--        }-->

<!--        .required {-->
<!--            color: #dc3545;-->
<!--        }-->

<!--        .form-control {-->
<!--            border-radius: 6px;-->
<!--            padding: 0.75rem 1rem;-->
<!--            border: 1px solid #ced4da;-->
<!--        }-->

<!--        .form-control:focus {-->
<!--            border-color: #86b7fe;-->
<!--            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);-->
<!--        }-->

<!--        .error-message {-->
<!--            color: #dc3545;-->
<!--            font-size: 0.875rem;-->
<!--            margin-top: 0.5rem;-->
<!--        }-->

<!--        .password-note {-->
<!--            font-size: 0.875rem;-->
<!--            color: #6c757d;-->
<!--            margin-top: 0.25rem;-->
<!--        }-->

<!--        .role-info {-->
<!--            background-color: #f8f9fa;-->
<!--            border-left: 4px solid #0d6efd;-->
<!--            padding: 1rem;-->
<!--            margin-top: 1rem;-->
<!--            border-radius: 0 4px 4px 0;-->
<!--        }-->

<!--        .btn {-->
<!--            border-radius: 6px;-->
<!--            padding: 0.75rem 1.5rem;-->
<!--            font-weight: 500;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<div class="container-fluid">-->
<!--    <div class="row">-->
<!--        <div th:replace="fragments/admin_sidebar :: admin_sidebar"></div>-->


<!--        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 content">-->

<!--            <div class="container mt-4">-->
<!--                <div class="page-header">-->
<!--                    <div class="d-flex justify-content-between align-items-center">-->
<!--                        <h1 class="h3 mb-0" th:text="${userId != null ? 'Chỉnh sửa Nhân viên' : 'Thêm Nhân viên mới'}">-->
<!--                            <i class="fas fa-user-plus me-2"></i> Thêm Nhân viên mới-->
<!--                        </h1>-->
<!--                        <a href="/admin/staff" class="btn btn-outline-secondary">-->
<!--                            <i class="fas fa-arrow-left me-2"></i> Quay lại danh sách-->
<!--                        </a>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="form-container">-->
<!--                    <form th:action="${userId != null ? '/admin/staff/' + userId + '/edit' : '/admin/staff/add'}"-->
<!--                          method="post" th:object="${userRequest}">-->

<!--                        &lt;!&ndash; Thông tin đăng nhập &ndash;&gt;-->
<!--                        <h5 class="section-title">-->
<!--                            <i class="fas fa-key me-2"></i> Thông tin đăng nhập-->
<!--                        </h5>-->

<!--                        <div class="row mb-4">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="username" class="form-label">Tên đăng nhập <span class="required">*</span></label>-->
<!--                                <input type="text" id="username" th:field="*{username}" class="form-control"-->
<!--                                       placeholder="Nhập tên đăng nhập...">-->
<!--                                <div th:if="${#fields.hasErrors('username')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{username}"></span>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="email" class="form-label">Email <span class="required">*</span></label>-->
<!--                                <input type="email" id="email" th:field="*{email}" class="form-control"-->
<!--                                       placeholder="Nhập email...">-->
<!--                                <div th:if="${#fields.hasErrors('email')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{email}"></span>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-12 mb-3">-->
<!--                                <label for="password" class="form-label">-->
<!--                                    <span th:text="${userId != null ? 'Mật khẩu mới (để trống nếu không đổi)' : 'Mật khẩu'}">Mật khẩu</span>-->
<!--                                    <span th:if="${userId == null}" class="required">*</span>-->
<!--                                </label>-->
<!--                                <input type="password" id="password" th:field="*{password}" class="form-control"-->
<!--                                       placeholder="Nhập mật khẩu...">-->
<!--                                <div th:if="${userId != null}" class="password-note">-->
<!--                                    Để trống nếu không muốn thay đổi mật khẩu hiện tại-->
<!--                                </div>-->
<!--                                <div th:if="${#fields.hasErrors('password')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{password}"></span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Thông tin cá nhân &ndash;&gt;-->
<!--                        <h5 class="section-title">-->
<!--                            <i class="fas fa-user me-2"></i> Thông tin cá nhân-->
<!--                        </h5>-->

<!--                        <div class="row mb-4">-->
<!--                            <div class="col-12 mb-3">-->
<!--                                <label for="fullName" class="form-label">Họ và tên <span class="required">*</span></label>-->
<!--                                <input type="text" id="fullName" th:field="*{fullName}" class="form-control"-->
<!--                                       placeholder="Nhập họ và tên...">-->
<!--                                <div th:if="${#fields.hasErrors('fullName')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{fullName}"></span>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="phoneNumber" class="form-label">Số điện thoại</label>-->
<!--                                <input type="text" id="phoneNumber" th:field="*{phoneNumber}" class="form-control"-->
<!--                                       placeholder="Nhập số điện thoại...">-->
<!--                                <div th:if="${#fields.hasErrors('phoneNumber')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{phoneNumber}"></span>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="avatarUrl" class="form-label">Avatar URL</label>-->
<!--                                <input type="url" id="avatarUrl" th:field="*{avatarUrl}" class="form-control"-->
<!--                                       placeholder="Nhập URL avatar...">-->
<!--                                <div th:if="${#fields.hasErrors('avatarUrl')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{avatarUrl}"></span>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-12 mb-3">-->
<!--                                <label for="address" class="form-label">Địa chỉ</label>-->
<!--                                <input type="text" id="address" th:field="*{address}" class="form-control"-->
<!--                                       placeholder="Nhập địa chỉ...">-->
<!--                                <div th:if="${#fields.hasErrors('address')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{address}"></span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Phân quyền và phân công &ndash;&gt;-->
<!--                        <h5 class="section-title">-->
<!--                            <i class="fas fa-users-cog me-2"></i> Phân quyền & Phân công-->
<!--                        </h5>-->

<!--                        <div class="row mb-4">-->
<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="role" class="form-label">Vai trò <span class="required">*</span></label>-->
<!--                                <select id="role" th:field="*{role}" class="form-control" onchange="showRoleInfo(this.value)">-->
<!--                                    <option value="">Chọn vai trò</option>-->
<!--                                    <option th:each="r : ${staffRoles}"-->
<!--                                            th:value="${r}"-->
<!--                                            th:text="${roleLabels[r.name()]}">-->
<!--                                    </option>-->
<!--                                </select>-->
<!--                                <div th:if="${#fields.hasErrors('role')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{role}"></span>-->
<!--                                </div>-->

<!--                                &lt;!&ndash; Role Info &ndash;&gt;-->
<!--                                <div id="manager-info" class="role-info" style="display: none;">-->
<!--                                    <h6 class="mb-2"><i class="fas fa-user-tie me-1"></i> Quyền hạn Quản lý:</h6>-->
<!--                                    <ul class="mb-0 ps-3">-->
<!--                                        <li>Quản lý nhân viên trong chi nhánh</li>-->
<!--                                        <li>Xem báo cáo doanh thu chi nhánh</li>-->
<!--                                        <li>Quản lý đặt phòng/bàn</li>-->
<!--                                        <li>Xử lý khiếu nại khách hàng</li>-->
<!--                                    </ul>-->
<!--                                </div>-->

<!--                                <div id="staff-info" class="role-info" style="display: none;">-->
<!--                                    <h6 class="mb-2"><i class="fas fa-user me-1"></i> Quyền hạn Nhân viên:</h6>-->
<!--                                    <ul class="mb-0 ps-3">-->
<!--                                        <li>Xử lý đặt phòng/bàn</li>-->
<!--                                        <li>Cập nhật trạng thái phòng/bàn</li>-->
<!--                                        <li>Hỗ trợ khách hàng</li>-->
<!--                                        <li>Báo cáo cho quản lý</li>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-md-6 mb-3">-->
<!--                                <label for="branchId" class="form-label">Chi nhánh</label>-->
<!--                                <select id="branchId" th:field="*{branchId}" class="form-control">-->
<!--                                    <option value="">Chưa phân công</option>-->
<!--                                    <option th:each="branch : ${branches}"-->
<!--                                            th:value="${branch.id}"-->
<!--                                            th:text="${branch.name + ' (' + branch.type.displayName + ')'}">-->
<!--                                    </option>-->
<!--                                </select>-->
<!--                                <div th:if="${#fields.hasErrors('branchId')}" class="error-message">-->
<!--                                    <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{branchId}"></span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--&lt;!&ndash;                        <div class="d-flex justify-content-end gap-2 pt-3 border-top">&ndash;&gt;-->
<!--&lt;!&ndash;                            <a href="/admin/staff" class="btn btn-secondary">&ndash;&gt;-->
<!--&lt;!&ndash;                                <i class="fas fa-times me-2"></i> Hủy bỏ&ndash;&gt;-->
<!--&lt;!&ndash;                            </a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <button type="submit" class="btn btn-primary">&ndash;&gt;-->
<!--&lt;!&ndash;                                <i th:class="${userId != null ? 'fas fa-save' : 'fas fa-user-plus'} me-2"></i>&ndash;&gt;-->
<!--&lt;!&ndash;                                <span th:text="${userId != null ? 'Cập nhật' : 'Thêm mới'}">Thêm mới</span>&ndash;&gt;-->
<!--&lt;!&ndash;                            </button>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->

<!--                        <div class="d-flex justify-content-end gap-2 pt-3 border-top">-->
<!--                            <button type="submit" class="btn btn-primary">-->
<!--                                <i th:class="${userId != null ? 'fas fa-save' : 'fas fa-user-plus'}"></i>-->
<!--                                <span th:text="${userId != null ? 'Cập nhật' : 'Thêm mới'}">Thêm mới</span>-->
<!--                            </button>-->
<!--                            <a href="/admin/staff" class="btn btn-secondary">-->
<!--                                <i class="fas fa-times"></i> Hủy bỏ-->
<!--                            </a>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->
<!--        </main>-->
<!--    </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>-->
<!--<script>-->
<!--    function showRoleInfo(role) {-->
<!--        // Hide all role info-->
<!--        document.getElementById('manager-info').style.display = 'none';-->
<!--        document.getElementById('staff-info').style.display = 'none';-->

<!--        // Show selected role info-->
<!--        if (role === 'MANAGER') {-->
<!--            document.getElementById('manager-info').style.display = 'block';-->
<!--        } else if (role === 'STAFF') {-->
<!--            document.getElementById('staff-info').style.display = 'block';-->
<!--        }-->
<!--    }-->

<!--    // Show role info on page load if role is selected-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        const roleSelect = document.getElementById('role');-->
<!--        if (roleSelect.value) {-->
<!--            showRoleInfo(roleSelect.value);-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${userId != null ? 'Chỉnh sửa Nhân viên' : 'Thêm Nhân viên'}">Thêm Nhân viên</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/admin_sidebar.css}">
<!--    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">-->
    <style>
        body { background: #f5f6fa; font-family: 'Segoe UI', sans-serif; font-size: 13px; }
        .layout { display: flex; min-height: 100vh; }
        .sidebar { width: 240px; }
        .main-content { margin-left: 240px; padding: 20px; flex: 1; }

        .page-header {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .form-container {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e9ecef;
        }

        .form-label {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .required {
            color: #dc3545;
        }

        .form-control, .form-select {
            border-radius: 6px;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            font-size: 13px;
        }

        .form-control:focus, .form-select:focus {
            border-color: #86b7fe;
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
        }

        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 3px;
        }

        .password-note {
            font-size: 12px;
            color: #6c757d;
            margin-top: 3px;
        }

        .role-info {
            background-color: #f8f9fa;
            border-left: 4px solid #0d6efd;
            padding: 12px;
            margin-top: 8px;
            border-radius: 0 6px 6px 0;
            font-size: 13px;
        }

        .role-info h6 {
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .role-info ul {
            margin-bottom: 0;
            padding-left: 18px;
            font-size: 12px;
        }

        .role-info li {
            margin-bottom: 4px;
        }

        .btn {
            border-radius: 6px;
            padding: 6px 12px;
            font-weight: 500;
            font-size: 13px;
        }

        h1.h3 {
            font-size: 1.25rem;
            margin: 0;
        }

        .mb-3 {
            margin-bottom: 12px !important;
        }

        .mb-4 {
            margin-bottom: 15px !important;
        }

        .border-top {
            border-top: 1px solid #dee2e6 !important;
        }

        .pt-3 {
            padding-top: 12px !important;
        }
    </style>
</head>
<body>
<div class="layout">
    <div th:replace="fragments/admin_sidebar :: admin_sidebar"></div>

    <div class="main-content">
        <div class="page-header">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="h3 mb-0" th:text="${userId != null ? 'Chỉnh sửa Nhân viên' : 'Thêm Nhân viên mới'}">
                    <i class="fas fa-user-plus me-2"></i> Thêm Nhân viên mới
                </h1>
                <a href="/admin/staff" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i> Quay lại
                </a>
            </div>
        </div>

        <div class="form-container">
            <form th:action="${userId != null ? '/admin/staff/' + userId + '/edit' : '/admin/staff/add'}"
                  method="post" th:object="${userRequest}">

                <!-- Thông tin đăng nhập -->
                <h5 class="section-title">
                    <i class="fas fa-key me-2"></i> Thông tin đăng nhập
                </h5>

                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <label for="username" class="form-label">Tên đăng nhập <span class="required">*</span></label>
                        <input type="text" id="username" th:field="*{username}" class="form-control"
                               placeholder="Nhập tên đăng nhập...">
                        <div th:if="${#fields.hasErrors('username')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{username}"></span>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label">Email <span class="required">*</span></label>
                        <input type="email" id="email" th:field="*{email}" class="form-control"
                               placeholder="Nhập email...">
                        <div th:if="${#fields.hasErrors('email')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{email}"></span>
                        </div>
                    </div>

                    <div class="col-12 mb-3">
                        <label for="password" class="form-label">
                            <span th:text="${userId != null ? 'Mật khẩu mới (để trống nếu không đổi)' : 'Mật khẩu'}">Mật khẩu</span>
                            <span th:if="${userId == null}" class="required">*</span>
                        </label>
                        <input type="password" id="password" th:field="*{password}" class="form-control"
                               placeholder="Nhập mật khẩu...">
                        <div th:if="${userId != null}" class="password-note">
                            Để trống nếu không muốn thay đổi mật khẩu hiện tại
                        </div>
                        <div th:if="${#fields.hasErrors('password')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{password}"></span>
                        </div>
                    </div>
                </div>

                <!-- Thông tin cá nhân -->
                <h5 class="section-title">
                    <i class="fas fa-user me-2"></i> Thông tin cá nhân
                </h5>

                <div class="row mb-4">
                    <div class="col-12 mb-3">
                        <label for="fullName" class="form-label">Họ và tên <span class="required">*</span></label>
                        <input type="text" id="fullName" th:field="*{fullName}" class="form-control"
                               placeholder="Nhập họ và tên...">
                        <div th:if="${#fields.hasErrors('fullName')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{fullName}"></span>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="phoneNumber" class="form-label">Số điện thoại</label>
                        <input type="text" id="phoneNumber" th:field="*{phoneNumber}" class="form-control"
                               placeholder="Nhập số điện thoại...">
                        <div th:if="${#fields.hasErrors('phoneNumber')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{phoneNumber}"></span>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="avatarUrl" class="form-label">Avatar URL</label>
                        <input type="url" id="avatarUrl" th:field="*{avatarUrl}" class="form-control"
                               placeholder="Nhập URL avatar...">
                        <div th:if="${#fields.hasErrors('avatarUrl')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{avatarUrl}"></span>
                        </div>
                    </div>

                    <div class="col-12 mb-3">
                        <label for="address" class="form-label">Địa chỉ</label>
                        <input type="text" id="address" th:field="*{address}" class="form-control"
                               placeholder="Nhập địa chỉ...">
                        <div th:if="${#fields.hasErrors('address')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{address}"></span>
                        </div>
                    </div>
                </div>

                <!-- Phân quyền và phân công -->
                <h5 class="section-title">
                    <i class="fas fa-users-cog me-2"></i> Phân quyền & Phân công
                </h5>

                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <label for="role" class="form-label">Vai trò <span class="required">*</span></label>
                        <select id="role" th:field="*{role}" class="form-select" onchange="showRoleInfo(this.value)">
                            <option value="">Chọn vai trò</option>
                            <option th:each="r : ${staffRoles}"
                                    th:value="${r}"
                                    th:text="${roleLabels[r.name()]}">
                            </option>
                        </select>
                        <div th:if="${#fields.hasErrors('role')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{role}"></span>
                        </div>

                        <!-- Role Info -->
                        <div id="manager-info" class="role-info" style="display: none;">
                            <h6 class="mb-2"><i class="fas fa-user-tie me-1"></i> Quyền hạn Quản lý:</h6>
                            <ul class="mb-0">
                                <li>Quản lý nhân viên trong chi nhánh</li>
                                <li>Xem báo cáo doanh thu chi nhánh</li>
                                <li>Quản lý đặt phòng/bàn</li>
                                <li>Xử lý khiếu nại khách hàng</li>
                            </ul>
                        </div>

                        <div id="staff-info" class="role-info" style="display: none;">
                            <h6 class="mb-2"><i class="fas fa-user me-1"></i> Quyền hạn Nhân viên:</h6>
                            <ul class="mb-0">
                                <li>Xử lý đặt phòng/bàn</li>
                                <li>Cập nhật trạng thái phòng/bàn</li>
                                <li>Hỗ trợ khách hàng</li>
                                <li>Báo cáo cho quản lý</li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="branchId" class="form-label">Chi nhánh</label>
                        <select id="branchId" th:field="*{branchId}" class="form-select">
                            <option value="">Chưa phân công</option>
                            <option th:each="branch : ${branches}"
                                    th:value="${branch.id}"
                                    th:text="${branch.name + ' (' + branch.type.displayName + ')'}">
                            </option>
                        </select>
                        <div th:if="${#fields.hasErrors('branchId')}" class="error-message">
                            <i class="fas fa-exclamation-circle me-1"></i> <span th:errors="*{branchId}"></span>
                        </div>
                    </div>
                </div>

                                        <div class="d-flex justify-content-end gap-2 pt-3 border-top">
                                            <button type="submit" class="btn btn-primary">
                                                <i th:class="${userId != null ? 'fas fa-save' : 'fas fa-user-plus'}"></i>
                                                <span th:text="${userId != null ? 'Cập nhật' : 'Thêm mới'}">Thêm mới</span>
                                            </button>
                                            <a href="/admin/staff" class="btn btn-secondary">
                                                <i class="fas fa-times"></i> Hủy bỏ
                                            </a>
                                        </div>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function showRoleInfo(role) {
        document.getElementById('manager-info').style.display = 'none';
        document.getElementById('staff-info').style.display = 'none';

        if (role === 'MANAGER') {
            document.getElementById('manager-info').style.display = 'block';
        } else if (role === 'STAFF') {
            document.getElementById('staff-info').style.display = 'block';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const roleSelect = document.getElementById('role');
        if (roleSelect.value) {
            showRoleInfo(roleSelect.value);
        }
    });
</script>
</body>
</html>