<!--<!DOCTYPE html>-->
<!--<html lang="vi" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${menuCategoryId != null ? 'Chỉnh sửa loại menu' : 'Thêm loại menu'}">Quản lý loại menu</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">-->
<!--</head>-->
<!--<body class="bg-light">-->
<!--<div class="container py-4">-->
<!--    <div class="row">-->

<!--    &lt;!&ndash; Sidebar &ndash;&gt;-->
<!--    <div th:replace="fragments/manager_sidebar :: manager_sidebar"></div>-->
<!--    &lt;!&ndash; Main content &ndash;&gt;-->
<!--    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">-->
<!--    &lt;!&ndash; Header &ndash;&gt;-->
<!--            <div class="d-flex justify-content-between align-items-center mb-4">-->
<!--                <div>-->
<!--                    <h2 class="mb-0 text-dark fw-bold">-->
<!--                        <i class="fas fa-utensils text-primary me-2"></i>-->
<!--                        <span th:text="${menuCategoryId != null ? 'Chỉnh sửa loại menu' : 'Thêm loại menu'}">Thêm loại menu</span>-->
<!--                    </h2>-->
<!--                    <nav aria-label="breadcrumb" class="mt-2">-->
<!--                        <ol class="breadcrumb mb-0">-->
<!--                            <li class="breadcrumb-item">-->
<!--                                <a href="/manager/menu-categories" class="text-decoration-none">Loại menu</a>-->
<!--                            </li>-->
<!--                            <li class="breadcrumb-item active" aria-current="page"-->
<!--                                th:text="${menuCategoryId != null ? 'Chỉnh sửa' : 'Thêm mới'}">Thêm mới</li>-->
<!--                        </ol>-->
<!--                    </nav>-->
<!--                </div>-->
<!--                <a href="/manager/menu-categories" class="btn btn-outline-secondary">-->
<!--                    <i class="fas fa-arrow-left me-2"></i>Quay lại-->
<!--                </a>-->
<!--            </div>-->

<!--            &lt;!&ndash; Flash Messages &ndash;&gt;-->
<!--            <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">-->
<!--                <i class="fas fa-check-circle me-2"></i>-->
<!--                <span th:text="${success}"></span>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>-->
<!--            </div>-->

<!--            <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">-->
<!--                <i class="fas fa-exclamation-circle me-2"></i>-->
<!--                <span th:text="${error}"></span>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>-->
<!--            </div>-->

<!--            &lt;!&ndash; Form &ndash;&gt;-->
<!--            <div class="row justify-content-center">-->
<!--                <div class="col-xl-8">-->
<!--                    <div class="card border-0 shadow-sm">-->
<!--                        <div class="card-header bg-white border-bottom py-3">-->
<!--                            <h5 class="mb-0 fw-bold text-dark">-->
<!--                                <i class="fas fa-info-circle text-primary me-2"></i>-->
<!--                                Thông tin loại menu-->
<!--                            </h5>-->
<!--                        </div>-->

<!--                        <div class="card-body p-4">-->
<!--                            <form th:object="${menuCategoryRequest}"-->
<!--                                  th:action="${menuCategoryId != null ? '/manager/menu-categories/' + menuCategoryId + '/edit' : '/manager/menu-categories/add'}"-->
<!--                                  method="post" novalidate>-->

<!--                                <div class="row g-4">-->
<!--                                    &lt;!&ndash; Tên loại menu &ndash;&gt;-->
<!--                                    <div class="col-md-8">-->
<!--                                        <label for="name" class="form-label fw-medium">-->
<!--                                            Tên loại menu <span class="text-danger">*</span>-->
<!--                                        </label>-->
<!--                                        <input type="text"-->
<!--                                               class="form-control"-->
<!--                                               th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''"-->
<!--                                               id="name"-->
<!--                                               th:field="*{name}"-->
<!--                                               placeholder="Ví dụ: Món chính, Tráng miệng, Đồ uống..."-->
<!--                                               maxlength="100">-->
<!--                                        <div th:if="${#fields.hasErrors('name')}"-->
<!--                                             class="invalid-feedback"-->
<!--                                             th:errors="*{name}">-->
<!--                                        </div>-->
<!--                                        <div class="form-text">-->
<!--                                            <i class="fas fa-info-circle me-1"></i>-->
<!--                                            Tên loại menu sẽ hiển thị trong danh sách menu cho khách hàng-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Thứ tự hiển thị &ndash;&gt;-->
<!--                                    <div class="col-md-4">-->
<!--                                        <label for="displayOrder" class="form-label fw-medium">-->
<!--                                            Thứ tự hiển thị-->
<!--                                        </label>-->
<!--                                        <input type="number"-->
<!--                                               class="form-control"-->
<!--                                               th:classappend="${#fields.hasErrors('displayOrder')} ? 'is-invalid' : ''"-->
<!--                                               id="displayOrder"-->
<!--                                               th:field="*{displayOrder}"-->
<!--                                               min="1"-->
<!--                                               max="999"-->
<!--                                               placeholder="1">-->
<!--                                        <div th:if="${#fields.hasErrors('displayOrder')}"-->
<!--                                             class="invalid-feedback"-->
<!--                                             th:errors="*{displayOrder}">-->
<!--                                        </div>-->
<!--                                        <div class="form-text">-->
<!--                                            <i class="fas fa-sort me-1"></i>-->
<!--                                            Số thứ tự trong menu (1-999)-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Mô tả &ndash;&gt;-->
<!--                                    <div class="col-12">-->
<!--                                        <label for="description" class="form-label fw-medium">-->
<!--                                            Mô tả loại menu-->
<!--                                        </label>-->
<!--                                        <textarea class="form-control"-->
<!--                                                  th:classappend="${#fields.hasErrors('description')} ? 'is-invalid' : ''"-->
<!--                                                  id="description"-->
<!--                                                  th:field="*{description}"-->
<!--                                                  rows="3"-->
<!--                                                  placeholder="Mô tả chi tiết về loại menu này..."-->
<!--                                                  maxlength="500"></textarea>-->
<!--                                        <div th:if="${#fields.hasErrors('description')}"-->
<!--                                             class="invalid-feedback"-->
<!--                                             th:errors="*{description}">-->
<!--                                        </div>-->
<!--                                        <div class="form-text">-->
<!--                                            <span id="descriptionCount">0</span>/500 ký tự-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Trạng thái &ndash;&gt;-->
<!--                                    <div class="col-md-6">-->
<!--                                        <label for="status" class="form-label fw-medium">-->
<!--                                            Trạng thái <span class="text-danger">*</span>-->
<!--                                        </label>-->
<!--                                        <select class="form-select"-->
<!--                                                th:classappend="${#fields.hasErrors('status')} ? 'is-invalid' : ''"-->
<!--                                                id="status"-->
<!--                                                th:field="*{status}">-->
<!--                                            <option value="">Chọn trạng thái</option>-->
<!--                                            <option th:each="statusOption : ${statuses}"-->
<!--                                                    th:value="${statusOption}"-->
<!--                                                    th:text="${statusOption eq T(com.example.htql_nhahang_khachsan.enums.Status).ACTIVE ? 'Hoạt động' : 'Không hoạt động'}"-->
<!--                                                    th:selected="${menuCategoryRequest.status eq statusOption}">-->
<!--                                            </option>-->
<!--                                        </select>-->
<!--                                        <div th:if="${#fields.hasErrors('status')}"-->
<!--                                             class="invalid-feedback"-->
<!--                                             th:errors="*{status}">-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    &lt;!&ndash; Ghi chú &ndash;&gt;-->
<!--                                    <div class="col-12">-->
<!--                                        <div class="alert alert-info border-0 bg-light">-->
<!--                                            <div class="d-flex">-->
<!--                                                <i class="fas fa-lightbulb text-info me-3 mt-1"></i>-->
<!--                                                <div>-->
<!--                                                    <h6 class="fw-bold mb-2">Lưu ý quan trọng:</h6>-->
<!--                                                    <ul class="mb-0 ps-3">-->
<!--                                                        <li>Tên loại menu phải là duy nhất trong cùng chi nhánh</li>-->
<!--                                                        <li>Thứ tự hiển thị sẽ quyết định vị trí xuất hiện trong menu</li>-->
<!--                                                        <li>Loại menu "Không hoạt động" sẽ không hiển thị cho khách hàng</li>-->
<!--                                                        <li>Bạn có thể sắp xếp lại thứ tự trong danh sách loại menu</li>-->
<!--                                                    </ul>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                &lt;!&ndash; Action Buttons &ndash;&gt;-->
<!--                                <div class="d-flex justify-content-between pt-4 border-top mt-4">-->
<!--                                    <a href="/manager/menu-categories" class="btn btn-outline-secondary px-4">-->
<!--                                        <i class="fas fa-times me-2"></i>Hủy-->
<!--                                    </a>-->
<!--                                    <button type="submit" class="btn btn-primary px-4">-->
<!--                                        <i class="fas fa-save me-2"></i>-->
<!--                                        <span th:text="${menuCategoryId != null ? 'Cập nhật' : 'Thêm mới'}">Thêm mới</span>-->
<!--                                    </button>-->
<!--                                </div>-->
<!--                            </form>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </main>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Scripts &ndash;&gt;-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>-->
<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Character counter for description-->
<!--        const descriptionTextarea = document.getElementById('description');-->
<!--        const descriptionCount = document.getElementById('descriptionCount');-->

<!--        function updateCharacterCount() {-->
<!--            const currentLength = descriptionTextarea.value.length;-->
<!--            descriptionCount.textContent = currentLength;-->

<!--            if (currentLength > 400) {-->
<!--                descriptionCount.className = 'text-warning fw-bold';-->
<!--            } else if (currentLength > 450) {-->
<!--                descriptionCount.className = 'text-danger fw-bold';-->
<!--            } else {-->
<!--                descriptionCount.className = 'text-muted';-->
<!--            }-->
<!--        }-->

<!--        if (descriptionTextarea) {-->
<!--            descriptionTextarea.addEventListener('input', updateCharacterCount);-->
<!--            updateCharacterCount(); // Initial count-->
<!--        }-->

<!--        // Auto-focus on name field-->
<!--        const nameInput = document.getElementById('name');-->
<!--        if (nameInput) {-->
<!--            nameInput.focus();-->
<!--        }-->

<!--        // Form validation-->
<!--        const form = document.querySelector('form');-->
<!--        form.addEventListener('submit', function(event) {-->
<!--            if (!form.checkValidity()) {-->
<!--                event.preventDefault();-->
<!--                event.stopPropagation();-->
<!--            }-->
<!--            form.classList.add('was-validated');-->
<!--        });-->

<!--        // Real-time validation feedback-->
<!--        const inputs = form.querySelectorAll('input, select, textarea');-->
<!--        inputs.forEach(input => {-->
<!--            input.addEventListener('blur', function() {-->
<!--                if (this.checkValidity()) {-->
<!--                    this.classList.remove('is-invalid');-->
<!--                    this.classList.add('is-valid');-->
<!--                } else {-->
<!--                    this.classList.remove('is-valid');-->
<!--                    this.classList.add('is-invalid');-->
<!--                }-->
<!--            });-->

<!--            input.addEventListener('input', function() {-->
<!--                if (this.classList.contains('is-invalid') && this.checkValidity()) {-->
<!--                    this.classList.remove('is-invalid');-->
<!--                    this.classList.add('is-valid');-->
<!--                }-->
<!--            });-->
<!--        });-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${menuCategoryId != null ? 'Chỉnh sửa loại menu' : 'Thêm loại menu'}">Quản lý loại menu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">

    <style>
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(180deg, #212529 0%, #1a1e21 100%);
        }
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            border-radius: 8px;
            margin: 2px 0;
            transition: all 0.3s ease;
        }
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background: rgba(255,255,255,0.2);
            color: white;
            transform: translateX(5px);
        }
        .card {
            border: none;
            border-radius: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .stats-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .stats-card.success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .stats-card.warning {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        .stats-card.info {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        .feature-card {
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            border-left-color: #f093fb;
            border-left-width: 6px;
        }
        .welcome-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
        }
        .form-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px 15px 0 0;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-2px);
        }
        .breadcrumb-item a {
            color: #667eea;
            text-decoration: none;
        }
    </style>
</head>
<body class="bg-light">
<div class="container-fluid ">
    <div class="row">

        <!-- Sidebar -->
<!--        <div class="col-md-2 sidebar px-3 py-4">-->
<!--            <div class="text-center mb-4">-->
<!--                <i class="bi bi-building text-white" style="font-size: 2.5rem;"></i>-->
<!--                <h5 class="text-white mt-2">Manager Panel</h5>-->
<!--                <small class="text-white-50">Quản lý Chi nhánh</small>-->
<!--            </div>-->

<!--            <ul class="nav flex-column">-->
<!--                <li class="nav-item mb-1">-->
<!--                    <a class="nav-link" href="/manager/dashboard">-->
<!--                        <i class="bi bi-speedometer2 me-2"></i>Tổng quan-->
<!--                    </a>-->
<!--                </li>-->

<!--                &lt;!&ndash; Khách sạn &ndash;&gt;-->
<!--                <li class="nav-item">-->
<!--                    <h6 class="text-white-50 mt-3 mb-2 px-2">KHÁCH SẠN</h6>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">-->
<!--                        <i class="bi bi-house me-2"></i>Quản lý loại phòng-->
<!--                    </a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">-->
<!--                        <i class="bi bi-door-open me-2"></i>Quản lý phòng-->
<!--                    </a>-->
<!--                </li>-->

<!--                &lt;!&ndash; Nhà hàng &ndash;&gt;-->
<!--                <li class="nav-item">-->
<!--                    <h6 class="text-white-50 mt-3 mb-2 px-2">NHÀ HÀNG</h6>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">-->
<!--                        <i class="bi bi-table me-2"></i>Quản lý bàn ăn-->
<!--                    </a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link active" href="/manager/menu-categories">-->
<!--                        <i class="bi bi-menu-button-wide me-2"></i>Quản lý menu-->
<!--                    </a>-->
<!--                </li>-->

<!--                &lt;!&ndash; Quản lý chung &ndash;&gt;-->
<!--                <li class="nav-item">-->
<!--                    <h6 class="text-white-50 mt-3 mb-2 px-2">QUẢN LÝ CHUNG</h6>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">-->
<!--                        <i class="bi bi-people me-2"></i>Quản lý nhân viên-->
<!--                    </a>-->
<!--                </li>-->
<!--            </ul>-->

<!--            <div class="mt-4 pt-3 border-top border-white-50">-->
<!--                <form th:action="@{/logout}" method="post" class="d-inline">-->
<!--                    <button type="submit" class="btn btn-outline-light btn-sm w-100">-->
<!--                        <i class="bi bi-box-arrow-right me-2"></i>Đăng xuất-->
<!--                    </button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
        <div th:replace="fragments/manager_sidebar :: manager_sidebar"></div>


        <!-- Main content -->
        <main class="col-md-10 ms-sm-auto px-md-4">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="mb-0 text-dark fw-bold">
                        <i class="fas fa-utensils text-primary me-2"></i>
                        <span th:text="${menuCategoryId != null ? 'Chỉnh sửa loại menu' : 'Thêm loại menu'}">Thêm loại menu</span>
                    </h2>
                    <nav aria-label="breadcrumb" class="mt-2">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item">
                                <a href="/manager/dashboard" class="text-decoration-none">Dashboard</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="/manager/menu-categories" class="text-decoration-none">Loại menu</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page"
                                th:text="${menuCategoryId != null ? 'Chỉnh sửa' : 'Thêm mới'}">Thêm mới</li>
                        </ol>
                    </nav>
                </div>
                <a href="/manager/menu-categories" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Quay lại
                </a>
            </div>

            <!-- Flash Messages -->
            <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fas fa-check-circle me-2"></i>
                <span th:text="${success}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle me-2"></i>
                <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Form -->
            <div class="row justify-content-center">
                <div class="col-xl-10">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header form-header py-3">
                            <h5 class="mb-0 fw-bold text-white">
                                <i class="fas fa-info-circle me-2"></i>
                                Thông tin loại menu
                            </h5>
                        </div>

                        <div class="card-body p-4">
                            <form th:object="${menuCategoryRequest}"
                                  th:action="${menuCategoryId != null ? '/manager/menu-categories/' + menuCategoryId + '/edit' : '/manager/menu-categories/add'}"
                                  method="post" novalidate>

                                <div class="row g-4">
                                    <!-- Tên loại menu -->
                                    <div class="col-md-8">
                                        <label for="name" class="form-label fw-medium">
                                            Tên loại menu <span class="text-danger">*</span>
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-heading"></i></span>
                                            <input type="text"
                                                   class="form-control"
                                                   th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''"
                                                   id="name"
                                                   th:field="*{name}"
                                                   placeholder="Ví dụ: Món chính, Tráng miệng, Đồ uống..."
                                                   maxlength="100">
                                        </div>
                                        <div th:if="${#fields.hasErrors('name')}"
                                             class="invalid-feedback d-block"
                                             th:errors="*{name}">
                                        </div>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Tên loại menu sẽ hiển thị trong danh sách menu cho khách hàng
                                        </div>
                                    </div>

                                    <!-- Thứ tự hiển thị -->
                                    <div class="col-md-4">
                                        <label for="displayOrder" class="form-label fw-medium">
                                            Thứ tự hiển thị
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-sort-numeric-down"></i></span>
                                            <input type="number"
                                                   class="form-control"
                                                   th:classappend="${#fields.hasErrors('displayOrder')} ? 'is-invalid' : ''"
                                                   id="displayOrder"
                                                   th:field="*{displayOrder}"
                                                   min="1"
                                                   max="999"
                                                   placeholder="1">
                                        </div>
                                        <div th:if="${#fields.hasErrors('displayOrder')}"
                                             class="invalid-feedback d-block"
                                             th:errors="*{displayOrder}">
                                        </div>
                                        <div class="form-text">
                                            <i class="fas fa-sort me-1"></i>
                                            Số thứ tự trong menu (1-999)
                                        </div>
                                    </div>

                                    <!-- Mô tả -->
                                    <div class="col-12">
                                        <label for="description" class="form-label fw-medium">
                                            Mô tả loại menu
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                                            <textarea class="form-control"
                                                      th:classappend="${#fields.hasErrors('description')} ? 'is-invalid' : ''"
                                                      id="description"
                                                      th:field="*{description}"
                                                      rows="3"
                                                      placeholder="Mô tả chi tiết về loại menu này..."
                                                      maxlength="500"></textarea>
                                        </div>
                                        <div th:if="${#fields.hasErrors('description')}"
                                             class="invalid-feedback d-block"
                                             th:errors="*{description}">
                                        </div>
                                        <div class="form-text">
                                            <span id="descriptionCount">0</span>/500 ký tự
                                        </div>
                                    </div>

                                    <!-- Trạng thái -->
                                    <div class="col-md-6">
                                        <label for="status" class="form-label fw-medium">
                                            Trạng thái <span class="text-danger">*</span>
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-toggle-on"></i></span>
                                            <select class="form-select"
                                                    th:classappend="${#fields.hasErrors('status')} ? 'is-invalid' : ''"
                                                    id="status"
                                                    th:field="*{status}">
                                                <option value="">Chọn trạng thái</option>
                                                <option th:each="statusOption : ${statuses}"
                                                        th:value="${statusOption}"
                                                        th:text="${statusOption eq T(com.example.htql_nhahang_khachsan.enums.Status).ACTIVE ? 'Hoạt động' : 'Không hoạt động'}"
                                                        th:selected="${menuCategoryRequest.status eq statusOption}">
                                                </option>
                                            </select>
                                        </div>
                                        <div th:if="${#fields.hasErrors('status')}"
                                             class="invalid-feedback d-block"
                                             th:errors="*{status}">
                                        </div>
                                    </div>

                                    <!-- Ghi chú -->
                                    <div class="col-12">
                                        <div class="alert alert-info border-0 bg-light">
                                            <div class="d-flex">
                                                <i class="fas fa-lightbulb text-info me-3 mt-1"></i>
                                                <div>
                                                    <h6 class="fw-bold mb-2">Lưu ý quan trọng:</h6>
                                                    <ul class="mb-0 ps-3">
                                                        <li>Tên loại menu phải là duy nhất trong cùng chi nhánh</li>
                                                        <li>Thứ tự hiển thị sẽ quyết định vị trí xuất hiện trong menu</li>
                                                        <li>Loại menu "Không hoạt động" sẽ không hiển thị cho khách hàng</li>
                                                        <li>Bạn có thể sắp xếp lại thứ tự trong danh sách loại menu</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="d-flex justify-content-between pt-4 border-top mt-4">
                                    <a href="/manager/menu-categories" class="btn btn-outline-secondary px-4">
                                        <i class="fas fa-times me-2"></i>Hủy
                                    </a>
                                    <button type="submit" class="btn btn-primary px-4">
                                        <i class="fas fa-save me-2"></i>
                                        <span th:text="${menuCategoryId != null ? 'Cập nhật' : 'Thêm mới'}">Thêm mới</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Character counter for description
        const descriptionTextarea = document.getElementById('description');
        const descriptionCount = document.getElementById('descriptionCount');

        function updateCharacterCount() {
            const currentLength = descriptionTextarea.value.length;
            descriptionCount.textContent = currentLength;

            if (currentLength > 400) {
                descriptionCount.className = 'text-warning fw-bold';
            } else if (currentLength > 450) {
                descriptionCount.className = 'text-danger fw-bold';
            } else {
                descriptionCount.className = 'text-muted';
            }
        }

        if (descriptionTextarea) {
            descriptionTextarea.addEventListener('input', updateCharacterCount);
            updateCharacterCount(); // Initial count
        }

        // Auto-focus on name field
        const nameInput = document.getElementById('name');
        if (nameInput) {
            nameInput.focus();
        }

        // Form validation
        const form = document.querySelector('form');
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });

        // Real-time validation feedback
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.checkValidity()) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                } else {
                    this.classList.remove('is-valid');
                    this.classList.add('is-invalid');
                }
            });

            input.addEventListener('input', function() {
                if (this.classList.contains('is-invalid') && this.checkValidity()) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                }
            });
        });
    });
</script>
</body>
</html>