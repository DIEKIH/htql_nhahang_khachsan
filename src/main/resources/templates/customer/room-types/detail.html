<!--<!DOCTYPE html>-->
<!--<html lang="vi" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${roomType.name + ' - ' + branch.name}">Chi Tiết Phòng - Luxury Resort</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">-->
<!--    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">-->
<!--    <style>-->
<!--        :root {-->
<!--            &#45;&#45;primary-color: #c9a96e;-->
<!--            &#45;&#45;secondary-color: #2c3e50;-->
<!--            &#45;&#45;accent-color: #f8f9fa;-->
<!--            &#45;&#45;text-dark: #2c3e50;-->
<!--            &#45;&#45;text-light: #6c757d;-->
<!--            &#45;&#45;bg-overlay: rgba(44, 62, 80, 0.7);-->
<!--        }-->

<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Inter', sans-serif;-->
<!--            line-height: 1.6;-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            padding-top: 80px;-->
<!--        }-->

<!--        .heading-font {-->
<!--            font-family: 'Playfair Display', serif;-->
<!--        }-->

<!--        /* Navigation */-->
<!--        .navbar {-->
<!--            background: rgba(255, 255, 255, 0.98) !important;-->
<!--            backdrop-filter: blur(10px);-->
<!--            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        .navbar-brand {-->
<!--            font-family: 'Playfair Display', serif;-->
<!--            font-size: 2rem;-->
<!--            font-weight: 600;-->
<!--            color: var(&#45;&#45;primary-color) !important;-->
<!--        }-->

<!--        .navbar-nav .nav-link {-->
<!--            font-weight: 500;-->
<!--            margin: 0 10px;-->
<!--            color: var(&#45;&#45;text-dark) !important;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .navbar-nav .nav-link:hover {-->
<!--            color: var(&#45;&#45;primary-color) !important;-->
<!--        }-->

<!--        .btn-luxury {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--            padding: 12px 30px;-->
<!--            border: none;-->
<!--            font-weight: 600;-->
<!--            text-transform: uppercase;-->
<!--            letter-spacing: 1px;-->
<!--            transition: all 0.3s ease;-->
<!--            border-radius: 50px;-->
<!--        }-->

<!--        .btn-luxury:hover {-->
<!--            background: #b8956b;-->
<!--            transform: translateY(-3px);-->
<!--            box-shadow: 0 10px 25px rgba(201, 169, 110, 0.4);-->
<!--            color: white;-->
<!--        }-->

<!--        /* Gallery */-->
<!--        .room-gallery {-->
<!--            height: 600px;-->
<!--            overflow: hidden;-->
<!--            border-radius: 20px;-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .main-image {-->
<!--            height: 100%;-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--        }-->

<!--        .main-image img {-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            object-fit: cover;-->
<!--            transition: transform 0.5s ease;-->
<!--        }-->

<!--        .gallery-thumbnails {-->
<!--            position: absolute;-->
<!--            bottom: 20px;-->
<!--            left: 20px;-->
<!--            right: 20px;-->
<!--            display: flex;-->
<!--            gap: 10px;-->
<!--            overflow-x: auto;-->
<!--        }-->

<!--        .thumbnail {-->
<!--            width: 80px;-->
<!--            height: 60px;-->
<!--            border-radius: 8px;-->
<!--            overflow: hidden;-->
<!--            border: 3px solid transparent;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            flex-shrink: 0;-->
<!--        }-->

<!--        .thumbnail.active {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        .thumbnail img {-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            object-fit: cover;-->
<!--        }-->

<!--        .gallery-overlay {-->
<!--            position: absolute;-->
<!--            top: 20px;-->
<!--            right: 20px;-->
<!--            background: rgba(0, 0, 0, 0.7);-->
<!--            color: white;-->
<!--            padding: 10px 20px;-->
<!--            border-radius: 25px;-->
<!--            font-weight: 600;-->
<!--        }-->

<!--        /* Room Info */-->
<!--        .room-header {-->
<!--            border-bottom: 2px solid var(&#45;&#45;accent-color);-->
<!--            padding-bottom: 30px;-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .room-title {-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .room-rating {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 15px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .stars {-->
<!--            color: #ffc107;-->
<!--        }-->

<!--        .price-display {-->
<!--            text-align: right;-->
<!--        }-->

<!--        .current-price {-->
<!--            font-size: 2.5rem;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            font-weight: 700;-->
<!--        }-->

<!--        .old-price {-->
<!--            text-decoration: line-through;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 1.2rem;-->
<!--        }-->

<!--        .price-note {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 0.9rem;-->
<!--        }-->

<!--        /* Features Grid */-->
<!--        .features-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));-->
<!--            gap: 20px;-->
<!--            margin: 30px 0;-->
<!--        }-->

<!--        .feature-item {-->
<!--            background: white;-->
<!--            border: 2px solid var(&#45;&#45;accent-color);-->
<!--            border-radius: 15px;-->
<!--            padding: 25px;-->
<!--            text-align: center;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .feature-item:hover {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            transform: translateY(-5px);-->
<!--        }-->

<!--        .feature-icon {-->
<!--            width: 60px;-->
<!--            height: 60px;-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            border-radius: 50%;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            margin: 0 auto 15px;-->
<!--            color: white;-->
<!--            font-size: 1.5rem;-->
<!--        }-->

<!--        /* Amenities */-->
<!--        .amenities-section {-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            padding: 40px;-->
<!--            border-radius: 20px;-->
<!--            margin: 30px 0;-->
<!--        }-->

<!--        .amenities-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));-->
<!--            gap: 20px;-->
<!--        }-->

<!--        .amenity-category h6 {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            margin-bottom: 15px;-->
<!--            font-weight: 600;-->
<!--        }-->

<!--        .amenity-item {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 8px;-->
<!--            font-size: 0.95rem;-->
<!--        }-->

<!--        .amenity-item i {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            width: 20px;-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        /* Booking Widget */-->
<!--        .booking-widget {-->
<!--            position: sticky;-->
<!--            top: 100px;-->
<!--            background: white;-->
<!--            border-radius: 20px;-->
<!--            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);-->
<!--            padding: 30px;-->
<!--            border: 2px solid var(&#45;&#45;primary-color);-->
<!--        }-->

<!--        .booking-widget h5 {-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--            margin-bottom: 25px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        .booking-form .form-label {-->
<!--            font-weight: 600;-->
<!--            color: var(&#45;&#45;text-dark);-->
<!--        }-->

<!--        .booking-form .form-control,-->
<!--        .booking-form .form-select {-->
<!--            border: 2px solid #eee;-->
<!--            border-radius: 10px;-->
<!--            padding: 12px 15px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .booking-form .form-control:focus,-->
<!--        .booking-form .form-select:focus {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            box-shadow: 0 0 0 0.2rem rgba(201, 169, 110, 0.25);-->
<!--        }-->

<!--        .total-price {-->
<!--            background: var(&#45;&#45;accent-color);-->
<!--            padding: 20px;-->
<!--            border-radius: 15px;-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .total-row {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        .total-row.final {-->
<!--            font-weight: 700;-->
<!--            font-size: 1.1rem;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            border-top: 1px solid #ddd;-->
<!--            padding-top: 10px;-->
<!--        }-->

<!--        /* Reviews Section */-->
<!--        .review-card {-->
<!--            background: white;-->
<!--            border-radius: 15px;-->
<!--            padding: 25px;-->
<!--            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .reviewer-info {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .reviewer-avatar {-->
<!--            width: 50px;-->
<!--            height: 50px;-->
<!--            border-radius: 50%;-->
<!--            object-fit: cover;-->
<!--            margin-right: 15px;-->
<!--        }-->

<!--        .reviewer-name {-->
<!--            font-weight: 600;-->
<!--            margin-bottom: 5px;-->
<!--        }-->

<!--        .review-date {-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-size: 0.9rem;-->
<!--        }-->

<!--        .review-rating {-->
<!--            color: #ffc107;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        /* Tabs */-->
<!--        .nav-tabs {-->
<!--            border: none;-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .nav-tabs .nav-link {-->
<!--            border: none;-->
<!--            background: none;-->
<!--            color: var(&#45;&#45;text-light);-->
<!--            font-weight: 600;-->
<!--            padding: 15px 25px;-->
<!--            border-radius: 25px;-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        .nav-tabs .nav-link.active {-->
<!--            background: var(&#45;&#45;primary-color);-->
<!--            color: white;-->
<!--        }-->

<!--        /* Responsive */-->
<!--        @media (max-width: 768px) {-->
<!--            .room-gallery {-->
<!--                height: 400px;-->
<!--            }-->

<!--            .features-grid {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->

<!--            .booking-widget {-->
<!--                position: static;-->
<!--                margin-top: 30px;-->
<!--            }-->

<!--            .price-display {-->
<!--                text-align: left;-->
<!--                margin-top: 20px;-->
<!--            }-->
<!--        }-->

<!--        /* Animation */-->
<!--        .fade-in {-->
<!--            animation: fadeIn 0.8s ease-in;-->
<!--        }-->

<!--        @keyframes fadeIn {-->
<!--            from { opacity: 0; transform: translateY(20px); }-->
<!--            to { opacity: 1; transform: translateY(0); }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->

<!--<body>-->
<!--<div th:replace="fragments/user_navbar :: user_navbar"></div>-->


<!--&lt;!&ndash; Main Content &ndash;&gt;-->
<!--<div class="container my-5">-->
<!--    <nav aria-label="breadcrumb" class="mb-4">-->
<!--        <ol class="breadcrumb">-->
<!--            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>-->
<!--            <li class="breadcrumb-item"><a th:href="@{/branches/{id}(id=${branch.id})}" th:text="${branch.name}">Chi nhánh</a></li>-->
<!--            <li class="breadcrumb-item active" th:text="${roomType.name}">Loại phòng</li>-->
<!--        </ol>-->
<!--    </nav>-->

<!--    <div class="row">-->
<!--        <div class="col-lg-8">-->
<!--            &lt;!&ndash; Gallery &ndash;&gt;-->
<!--            <div class="room-gallery fade-in">-->
<!--                <div class="main-image">-->
<!--                    &lt;!&ndash; Hiển thị ảnh chính &ndash;&gt;-->
<!--&lt;!&ndash;                    <img id="mainImage"&ndash;&gt;-->
<!--&lt;!&ndash;                         th:src="${!#lists.isEmpty(roomImages) ? roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'}"&ndash;&gt;-->
<!--&lt;!&ndash;                         th:alt="${roomType.name}">&ndash;&gt;-->
<!--                    <div th:with="mainImageUrl=${#lists.isEmpty(roomImages) ?-->
<!--                           'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80' :-->
<!--                           roomImages.get(0).imageUrl}">-->
<!--                        <img id="mainImage" th:src="${mainImageUrl}" th:alt="${roomType.name}">-->
<!--                    </div>-->

<!--                    <div class="gallery-overlay">-->
<!--                        <i class="fas fa-camera me-2"></i><span th:text="${#lists.size(roomImages)}">0</span> ảnh-->
<!--                    </div>-->
<!--                    <div class="thumbnail"-->
<!--                         th:each="image, iterStat : ${roomImages}"-->
<!--                         th:classappend="${iterStat.first} ? 'active' : ''"-->
<!--                         th:data-image-url="${image.imageUrl}"-->
<!--                         onclick="changeImage(this.dataset.imageUrl, this)">-->
<!--                        <img th:src="${image.imageUrl}" th:alt="${image.imageTitle}">-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            &lt;!&ndash; Room Header &ndash;&gt;-->
<!--            <div class="room-header fade-in">-->
<!--                <div class="row align-items-end">-->
<!--                    <div class="col-md-8">-->
<!--                        <h1 class="room-title heading-font" th:text="${roomType.name}">Tên loại phòng</h1>-->
<!--                        <div class="room-rating">-->
<!--                            <div class="stars">-->
<!--                                &lt;!&ndash; Hiển thị rating nếu có &ndash;&gt;-->
<!--                                <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, 5)}"></i>-->
<!--                            </div>-->
<!--                            <span class="fw-semibold">4.8/5</span>-->
<!--                            <span class="text-muted">(124 đánh giá)</span>-->
<!--                        </div>-->
<!--                        <p class="lead text-muted" th:text="${roomType.description}">Mô tả loại phòng</p>-->
<!--                    </div>-->
<!--                    <div class="col-md-4 price-display">-->
<!--                        &lt;!&ndash; Hiển thị giá gốc nếu có khuyến mãi &ndash;&gt;-->
<!--                        <div class="old-price" th:if="${roomType.originalPrice != null and roomType.originalPrice > roomType.currentPrice}"-->
<!--                             th:text="${#numbers.formatDecimal(roomType.originalPrice, 0, 'COMMA', 0, 'POINT') + '₫'}">-->
<!--                        </div>-->
<!--                        <div class="current-price" th:text="${roomType.formattedPrice}">Giá phòng</div>-->
<!--                        <div class="price-note">/ đêm (chưa bao gồm thuế)</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Features &ndash;&gt;-->
<!--            <div class="features-grid fade-in">-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-bed"></i>-->
<!--                    </div>-->
<!--                    <h6 th:text="${roomType.bedType}">Loại giường</h6>-->
<!--                    <p class="mb-0 text-muted">Giường cao cấp</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-users"></i>-->
<!--                    </div>-->
<!--                    <h6><span th:text="${roomType.maxOccupancy}">0</span> Khách</h6>-->
<!--                    <p class="mb-0 text-muted">Số người tối đa</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-ruler"></i>-->
<!--                    </div>-->
<!--                    <h6><span th:text="${roomType.roomSize}">0</span>m²</h6>-->
<!--                    <p class="mb-0 text-muted">Diện tích phòng</p>-->
<!--                </div>-->
<!--                <div class="feature-item">-->
<!--                    <div class="feature-icon">-->
<!--                        <i class="fas fa-eye"></i>-->
<!--                    </div>-->
<!--                    <h6 th:text="${roomType.viewType ?: 'City View'}">Tầm nhìn</h6>-->
<!--                    <p class="mb-0 text-muted">View từ phòng</p>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Tabs Content &ndash;&gt;-->
<!--            <div class="fade-in">-->
<!--                <ul class="nav nav-tabs" id="roomTabs">-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#amenities">-->
<!--                            <i class="fas fa-concierge-bell me-2"></i>Tiện nghi-->
<!--                        </button>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#policies">-->
<!--                            <i class="fas fa-file-contract me-2"></i>Chính sách-->
<!--                        </button>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviews">-->
<!--                            <i class="fas fa-star me-2"></i>Đánh giá-->
<!--                        </button>-->
<!--                    </li>-->
<!--                </ul>-->

<!--                <div class="tab-content">-->
<!--                    <div class="tab-pane fade show active" id="amenities">-->
<!--                        <div class="amenities-section">-->
<!--                            <div class="amenities-grid">-->
<!--                                &lt;!&ndash; Hiển thị các tiện nghi từ database &ndash;&gt;-->
<!--                                <div class="amenity-category" th:if="${roomType.amenities != null}">-->
<!--                                    <h6><i class="fas fa-concierge-bell me-2"></i>Tiện nghi phòng</h6>-->
<!--                                    <div class="amenity-item" th:each="amenity : ${#strings.listSplit(roomType.amenities, ',')}">-->
<!--                                        <i class="fas fa-check"></i>-->
<!--                                        <span th:text="${#strings.trim(amenity)}">Tiện nghi</span>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                &lt;!&ndash; Các tiện nghi mặc định &ndash;&gt;-->
<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-bed me-2"></i>Phòng ngủ</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i>-->
<!--                                        <span th:text="${roomType.bedType + ' cao cấp'}">Giường cao cấp</span>-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Ga giường cotton cao cấp-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Gối memory foam-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-bath me-2"></i>Phòng tắm</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Vòi hoa sen mưa-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Đồ dùng vệ sinh cao cấp-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Áo choàng tắm & dép-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                <div class="amenity-category">-->
<!--                                    <h6><i class="fas fa-wifi me-2"></i>Công nghệ</h6>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> WiFi tốc độ cao miễn phí-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Smart TV-->
<!--                                    </div>-->
<!--                                    <div class="amenity-item">-->
<!--                                        <i class="fas fa-check"></i> Điều hòa thông minh-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="tab-pane fade" id="policies">-->
<!--                        <div class="amenities-section">-->
<!--                            <div class="row">-->
<!--                                <div class="col-md-6">-->
<!--                                    <h6><i class="fas fa-clock me-2 text-primary"></i>Thời gian</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2"><i class="fas fa-sign-in-alt me-2 text-success"></i> Check-in: 15:00</li>-->
<!--                                        <li class="mb-2"><i class="fas fa-sign-out-alt me-2 text-danger"></i> Check-out: 12:00</li>-->
<!--                                        <li class="mb-2"><i class="fas fa-calendar me-2 text-info"></i> Check-in sớm có thể được sắp xếp</li>-->
<!--                                    </ul>-->

<!--                                    <h6 class="mt-4"><i class="fas fa-ban me-2 text-danger"></i>Hủy phòng</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2">• Hủy miễn phí trước 24h</li>-->
<!--                                        <li class="mb-2">• Hủy trong vòng 24h: phí 50%</li>-->
<!--                                        <li class="mb-2">• No-show: tính 100% phí phòng</li>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                                <div class="col-md-6">-->
<!--                                    <h6><i class="fas fa-info-circle me-2 text-info"></i>Thông tin khác</h6>-->
<!--                                    <ul class="list-unstyled">-->
<!--                                        <li class="mb-2">• Không hút thuốc</li>-->
<!--                                        <li class="mb-2">• Đảm bảo thẻ tín dụng khi check-in</li>-->
<!--                                        <li class="mb-2">• Phí phụ thu cho khách vượt quá</li>-->
<!--                                        <li class="mb-2">• Dịch vụ dọn phòng hàng ngày</li>-->
<!--                                    </ul>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="tab-pane fade" id="reviews">-->
<!--                        <div class="review-card">-->
<!--                            <div class="reviewer-info">-->
<!--                                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b605?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Reviewer" class="reviewer-avatar">-->
<!--                                <div>-->
<!--                                    <div class="reviewer-name">Nguyễn Minh Anh</div>-->
<!--                                    <div class="review-date">15 tháng 8, 2024</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="review-rating">-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                                <i class="fas fa-star"></i>-->
<!--                            </div>-->
<!--                            <p>"Phòng tuyệt vời với thiết kế hiện đại. Dịch vụ chu đáo, nhân viên thân thiện. Sẽ quay lại lần sau!"</p>-->
<!--                        </div>-->

<!--                        <button class="btn btn-outline-primary">Xem thêm đánh giá</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Booking Widget &ndash;&gt;-->
<!--        <div class="col-lg-4">-->
<!--            <div class="booking-widget fade-in">-->
<!--                <h5><i class="fas fa-calendar-check me-2"></i>Đặt phòng ngay</h5>-->

<!--&lt;!&ndash;                <form class="booking-form" th:action="@{/bookings/room-type/{id}(id=${roomType.id})}" method="post">&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="row">&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label class="form-label">Ngày nhận phòng</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label class="form-label">Ngày trả phòng</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="col-6">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label class="form-label">Người lớn</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <select class="form-select" name="adults" th:max="${roomType.maxOccupancy}">&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="1">1</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="2" selected>2</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="3" th:if="${roomType.maxOccupancy >= 3}">3</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="4" th:if="${roomType.maxOccupancy >= 4}">4</option>&ndash;&gt;-->
<!--&lt;!&ndash;                            </select>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="col-6">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label class="form-label">Trẻ em</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <select class="form-select" name="children">&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="0" selected>0</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="1">1</option>&ndash;&gt;-->
<!--&lt;!&ndash;                                <option value="2">2</option>&ndash;&gt;-->
<!--&lt;!&ndash;                            </select>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->

<!--&lt;!&ndash;                    &lt;!&ndash; Availability Display &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;                    <div id="availabilityInfo" class="mt-3"></div>&ndash;&gt;-->

<!--&lt;!&ndash;                    <div class="total-price" id="pricingDetails">&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="total-row">&ndash;&gt;-->
<!--&lt;!&ndash;                            <span th:text="${roomType.formattedPrice + ' x 1 đêm'}">Giá phòng x 1 đêm</span>&ndash;&gt;-->
<!--&lt;!&ndash;                            <span id="basePrice" th:text="${roomType.formattedPrice}">0₫</span>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <div class="total-row">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                            <span>Phí dịch vụ</span>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                            <span id="servicePrice">0₫</span>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        </div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <div class="total-row">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                            <span>Thuế VAT (10%)</span>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                            <span id="vatPrice">0₫</span>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        </div>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="total-row final">&ndash;&gt;-->
<!--&lt;!&ndash;                            <span>Tổng cộng</span>&ndash;&gt;-->
<!--&lt;!&ndash;                            <span id="totalPrice" th:text="${roomType.formattedPrice}">0₫</span>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->

<!--&lt;!&ndash;                    <button type="submit" class="btn btn-luxury w-100 mb-3" id="bookingBtn">&ndash;&gt;-->
<!--&lt;!&ndash;                        <i class="fas fa-credit-card me-2"></i>Đặt ngay&ndash;&gt;-->
<!--&lt;!&ndash;                    </button>&ndash;&gt;-->

<!--&lt;!&ndash;                    <div class="text-center">&ndash;&gt;-->
<!--&lt;!&ndash;                        <small class="text-muted">Không tính phí cho đến khi xác nhận</small>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--&lt;!&ndash;                </form>&ndash;&gt;-->
<!--                <form class="booking-form"-->
<!--                      th:action="@{/bookings/room-type/{id}/select(id=${roomType.id})}"-->
<!--                      method="post">-->

<!--                    <div class="row g-3">-->
<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-calendar-alt me-1"></i>Ngày nhận phòng-->
<!--                            </label>-->
<!--                            <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>-->
<!--                        </div>-->

<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-calendar-alt me-1"></i>Ngày trả phòng-->
<!--                            </label>-->
<!--                            <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>-->
<!--                        </div>-->

<!--                        <div class="col-12">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-door-open me-1"></i>Số lượng phòng-->
<!--                            </label>-->
<!--                            <select class="form-select" name="numberOfRooms" id="numberOfRooms" required>-->
<!--                                <option value="1" selected>1 phòng</option>-->
<!--                                <option value="2">2 phòng</option>-->
<!--                                <option value="3">3 phòng</option>-->
<!--                                <option value="4">4 phòng</option>-->
<!--                                <option value="5">5 phòng</option>-->
<!--                            </select>-->
<!--                            <small class="text-muted">Tối đa 5 phòng/lần đặt</small>-->
<!--                        </div>-->

<!--                        <div class="col-6">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-user me-1"></i>Người lớn-->
<!--                            </label>-->
<!--                            <select class="form-select" name="adults" id="adults" required>-->
<!--                                <option value="1">1</option>-->
<!--                                <option value="2" selected>2</option>-->
<!--                                <option value="3" th:if="${roomType.maxOccupancy >= 3}">3</option>-->
<!--                                <option value="4" th:if="${roomType.maxOccupancy >= 4}">4</option>-->
<!--                            </select>-->
<!--                        </div>-->

<!--                        <div class="col-6">-->
<!--                            <label class="form-label">-->
<!--                                <i class="fas fa-child me-1"></i>Trẻ em-->
<!--                            </label>-->
<!--                            <select class="form-select" name="children" id="children">-->
<!--                                <option value="0" selected>0</option>-->
<!--                                <option value="1">1</option>-->
<!--                                <option value="2">2</option>-->
<!--                                <option value="3">3</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Availability Display &ndash;&gt;-->
<!--                    <div id="availabilityInfo" class="mt-3"></div>-->

<!--                    &lt;!&ndash; Pricing Summary &ndash;&gt;-->
<!--                    <div class="pricing-summary mt-3">-->
<!--                        <div class="pricing-row">-->
<!--                            <span id="priceText" th:text="${roomType.formattedPrice + ' x 1 đêm x 1 phòng'}"></span>-->
<!--                            <span id="basePrice" th:text="${roomType.formattedPrice}">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row">-->
<!--                            <span>Phí dịch vụ (10%)</span>-->
<!--                            <span id="servicePrice">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row">-->
<!--                            <span>Thuế VAT (10%)</span>-->
<!--                            <span id="vatPrice">0₫</span>-->
<!--                        </div>-->
<!--                        <div class="pricing-row total">-->
<!--                            <span>Tổng cộng</span>-->
<!--                            <span id="totalPrice" th:text="${roomType.formattedPrice}">0₫</span>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <button type="submit" class="btn btn-luxury w-100 mt-3" id="bookingBtn">-->
<!--                        <i class="fas fa-arrow-right me-2"></i>Tiếp tục-->
<!--                    </button>-->

<!--                    <div class="text-center mt-3">-->
<!--                        <small class="text-muted">-->
<!--                            <i class="fas fa-shield-alt me-1"></i>-->
<!--                            Không tính phí cho đến khi xác nhận-->
<!--                        </small>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->

<!--            &lt;!&ndash; Room Info Widget &ndash;&gt;-->
<!--            <div class="booking-widget mt-4" style="background: linear-gradient(135deg, var(&#45;&#45;primary-color), #d4b079); color: white;">-->
<!--                <h5 style="color: white;"><i class="fas fa-info-circle me-2"></i>Thông tin phòng</h5>-->
<!--                <div class="mb-3">-->
<!--                    <p class="mb-2"><i class="fas fa-map-marker-alt me-2"></i><span th:text="${branch.name + ' - ' + branch.address}">Địa chỉ</span></p>-->
<!--                    <p class="mb-2"><i class="fas fa-phone me-2"></i><span th:text="${branch.phoneNumber}">Số điện thoại</span></p>-->
<!--                    <p class="mb-2"><i class="fas fa-bed me-2"></i>Còn <span th:text="${#lists.size(availableRooms)}">0</span> phòng trống</p>-->
<!--                </div>-->
<!--                <div class="d-grid gap-2">-->
<!--                    <a th:href="'tel:' + ${branch.phoneNumber}" class="btn btn-light">-->
<!--                        <i class="fas fa-phone me-2"></i>Gọi ngay-->
<!--                    </a>-->
<!--                    <a th:href="'mailto:' + ${branch.email}" class="btn btn-outline-light">-->
<!--                        <i class="fas fa-envelope me-2"></i>Email-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Similar Rooms &ndash;&gt;-->
<!--    <section class="mt-5" th:if="${!#lists.isEmpty(similarRoomTypes)}">-->
<!--        <h3 class="heading-font mb-4">Phòng tương tự</h3>-->
<!--        <div class="row g-4">-->
<!--            <div class="col-md-4" th:each="similar : ${similarRoomTypes}" th:if="${similar.id != roomType.id}">-->
<!--                <div class="card border-0 shadow-sm">-->
<!--                    <img th:src="${!#lists.isEmpty(similar.roomImages) ? similar.roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}"-->
<!--                         class="card-img-top" style="height: 250px; object-fit: cover;" th:alt="${similar.name}">-->
<!--                    <div class="card-body">-->
<!--                        <h5 class="card-title heading-font" th:text="${similar.name}">Tên phòng</h5>-->
<!--                        <p class="card-text text-muted" th:text="${#strings.abbreviate(similar.description, 50)}">Mô tả phòng</p>-->
<!--                        <div class="amenities-tags mb-3">-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-users me-1"></i>-->
<!--                                <span th:text="${similar.maxOccupancy}">2</span> khách-->
<!--                            </span>-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-bed me-1"></i>-->
<!--                                <span th:text="${similar.bedType}">Double</span>-->
<!--                            </span>-->
<!--                            <span class="amenity-tag">-->
<!--                                <i class="fas fa-expand-arrows-alt me-1"></i>-->
<!--                                <span th:text="${similar.roomSize}">25</span>m²-->
<!--                            </span>-->
<!--                        </div>-->
<!--                        <div class="d-flex justify-content-between align-items-center">-->
<!--                            <span class="text-primary fw-bold" th:text="${similar.formattedPrice + '/đêm'}">Giá/đêm</span>-->
<!--                            <a th:href="@{/room-types/{id}(id=${similar.id})}" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script th:inline="javascript">-->
<!--        const roomTypeId = /*[[${roomType.id}]]*/ 0;-->
<!--        const basePrice = /*[[${roomType.price}]]*/ 0;-->

<!--        // Ngày tối thiểu là hôm nay-->
<!--        const today = new Date().toISOString().split('T')[0];-->
<!--        document.getElementById('checkInDate').setAttribute('min', today);-->

<!--        // Cập nhật ngày checkout tối thiểu khi chọn checkin-->
<!--        document.getElementById('checkInDate').addEventListener('change', function() {-->
<!--        const checkInDate = new Date(this.value);-->
<!--        const minCheckOut = new Date(checkInDate);-->
<!--        minCheckOut.setDate(minCheckOut.getDate() + 1);-->

<!--        const minCheckOutStr = minCheckOut.toISOString().split('T')[0];-->
<!--        document.getElementById('checkOutDate').setAttribute('min', minCheckOutStr);-->

<!--        // Nếu checkout đã chọn mà nhỏ hơn min, reset-->
<!--        const checkOutInput = document.getElementById('checkOutDate');-->
<!--        if (checkOutInput.value && checkOutInput.value <= this.value) {-->
<!--        checkOutInput.value = '';-->
<!--    }-->

<!--        checkAvailabilityAndPrice();-->
<!--    });-->

<!--        document.getElementById('checkOutDate').addEventListener('change', checkAvailabilityAndPrice);-->
<!--        document.getElementById('numberOfRooms').addEventListener('change', checkAvailabilityAndPrice);-->
<!--        document.getElementById('adults').addEventListener('change', calculatePrice);-->
<!--        document.getElementById('children').addEventListener('change', calculatePrice);-->

<!--        function checkAvailabilityAndPrice() {-->
<!--        const checkInDate = document.getElementById('checkInDate').value;-->
<!--        const checkOutDate = document.getElementById('checkOutDate').value;-->
<!--        const numberOfRooms = document.getElementById('numberOfRooms').value;-->

<!--        if (!checkInDate || !checkOutDate) {-->
<!--        return;-->
<!--    }-->

<!--        // Kiểm tra phòng trống-->
<!--        fetch(`/bookings/api/check-availability?roomTypeId=${roomTypeId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}&numberOfRooms=${numberOfRooms}`)-->
<!--        .then(response => response.json())-->
<!--        .then(data => {-->
<!--        const availabilityInfo = document.getElementById('availabilityInfo');-->
<!--        const bookingBtn = document.getElementById('bookingBtn');-->

<!--        if (data.available) {-->
<!--        availabilityInfo.innerHTML = `-->
<!--                    <div class="alert alert-success">-->
<!--                        <i class="fas fa-check-circle me-2"></i>-->
<!--                        ${data.message}-->
<!--                    </div>-->
<!--                `;-->
<!--        bookingBtn.disabled = false;-->
<!--    } else {-->
<!--        availabilityInfo.innerHTML = `-->
<!--                    <div class="alert alert-warning">-->
<!--                        <i class="fas fa-exclamation-triangle me-2"></i>-->
<!--                        ${data.message}-->
<!--                    </div>-->
<!--                `;-->
<!--        bookingBtn.disabled = true;-->
<!--    }-->

<!--        calculatePrice();-->
<!--    })-->
<!--        .catch(error => {-->
<!--        console.error('Error:', error);-->
<!--    });-->
<!--    }-->

<!--        function calculatePrice() {-->
<!--        const checkInDate = document.getElementById('checkInDate').value;-->
<!--        const checkOutDate = document.getElementById('checkOutDate').value;-->
<!--        const numberOfRooms = parseInt(document.getElementById('numberOfRooms').value);-->

<!--        if (!checkInDate || !checkOutDate) {-->
<!--        return;-->
<!--    }-->

<!--        // Tính số đêm-->
<!--        const checkIn = new Date(checkInDate);-->
<!--        const checkOut = new Date(checkOutDate);-->
<!--        const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));-->

<!--        if (nights <= 0) {-->
<!--        return;-->
<!--    }-->

<!--        // Tính giá-->
<!--        const roomTotal = basePrice * nights * numberOfRooms;-->
<!--        const serviceFee = roomTotal * 0.1;-->
<!--        const vat = (roomTotal + serviceFee) * 0.1;-->
<!--        const total = roomTotal + serviceFee + vat;-->

<!--        // Cập nhật hiển thị-->
<!--        document.getElementById('priceText').textContent =-->
<!--        `${formatCurrency(basePrice)} x ${nights} đêm x ${numberOfRooms} phòng`;-->
<!--        document.getElementById('basePrice').textContent = formatCurrency(roomTotal);-->
<!--        document.getElementById('servicePrice').textContent = formatCurrency(serviceFee);-->
<!--        document.getElementById('vatPrice').textContent = formatCurrency(vat);-->
<!--        document.getElementById('totalPrice').textContent = formatCurrency(total);-->
<!--    }-->

<!--        function formatCurrency(amount) {-->
<!--        return new Intl.NumberFormat('vi-VN').format(amount) + '₫';-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${roomType.name + ' - ' + branch.name}">Chi Tiết Phòng - Luxury Resort</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/manager_sidebar.css}">
    <style>
        :root {
            --primary-color: #c9a96e;
            --secondary-color: #2c3e50;
            --accent-color: #f8f9fa;
            --text-dark: #2c3e50;
            --text-light: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.5;
            color: var(--text-dark);
            padding-top: 60px;
            font-size: 13px;
        }

        .heading-font {
            font-family: 'Playfair Display', serif;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.98) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            padding: 0.5rem 1rem;
        }

        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-color) !important;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            margin: 0 8px;
            color: var(--text-dark) !important;
            transition: all 0.3s ease;
            font-size: 13px;
        }

        .navbar-nav .nav-link:hover {
            color: var(--primary-color) !important;
        }

        .btn-luxury {
            background: var(--primary-color);
            color: white;
            padding: 8px 20px;
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            border-radius: 50px;
            font-size: 12px;
        }

        .btn-luxury:hover {
            background: #b8956b;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(201, 169, 110, 0.4);
            color: white;
        }

        .container {
            max-width: 1140px;
        }

        .my-5 {
            margin-top: 2rem !important;
            margin-bottom: 2rem !important;
        }

        .room-gallery {
            height: 450px;
            overflow: hidden;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .main-image {
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-thumbnails {
            position: absolute;
            bottom: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }

        .thumbnail {
            width: 60px;
            height: 45px;
            border-radius: 6px;
            overflow: hidden;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .thumbnail.active {
            border-color: var(--primary-color);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
        }

        .room-header {
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        .room-title {
            color: var(--text-dark);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .room-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 13px;
        }

        .stars {
            color: #ffc107;
            font-size: 14px;
        }

        .price-display {
            text-align: right;
        }

        .current-price {
            font-size: 1.8rem;
            color: var(--primary-color);
            font-weight: 700;
        }

        .old-price {
            text-decoration: line-through;
            color: var(--text-light);
            font-size: 1rem;
        }

        .price-note {
            color: var(--text-light);
            font-size: 0.8rem;
        }

        .lead {
            font-size: 1rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: white;
            border: 2px solid var(--accent-color);
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .feature-icon {
            width: 45px;
            height: 45px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            color: white;
            font-size: 1.1rem;
        }

        .feature-item h6 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .feature-item p {
            font-size: 11px;
        }

        .amenities-section {
            background: var(--accent-color);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .amenity-category h6 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 14px;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            font-size: 12px;
        }

        .amenity-item i {
            color: var(--primary-color);
            width: 18px;
            margin-right: 8px;
            font-size: 11px;
        }

        .booking-widget {
            position: sticky;
            top: 80px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border: 2px solid var(--primary-color);
        }

        .booking-widget h5 {
            color: var(--text-dark);
            margin-bottom: 18px;
            text-align: center;
            font-size: 1.1rem;
        }

        .booking-form .form-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .booking-form .form-control,
        .booking-form .form-select {
            border: 2px solid #eee;
            border-radius: 8px;
            padding: 8px 12px;
            margin-bottom: 12px;
            font-size: 12px;
        }

        .booking-form .form-control:focus,
        .booking-form .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.15rem rgba(201, 169, 110, 0.25);
        }

        .g-3 {
            gap: 0.75rem !important;
        }

        .pricing-summary {
            background: var(--accent-color);
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 12px;
        }

        .pricing-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .pricing-row.total {
            font-weight: 700;
            font-size: 1rem;
            color: var(--primary-color);
            border-top: 1px solid #ddd;
            padding-top: 8px;
        }

        .review-card {
            background: white;
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 15px;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .reviewer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
        }

        .reviewer-name {
            font-weight: 600;
            margin-bottom: 3px;
            font-size: 13px;
        }

        .review-date {
            color: var(--text-light);
            font-size: 11px;
        }

        .review-rating {
            color: #ffc107;
            margin-bottom: 12px;
            font-size: 13px;
        }

        .review-card p {
            font-size: 12px;
        }

        .nav-tabs {
            border: none;
            margin-bottom: 20px;
        }

        .nav-tabs .nav-link {
            border: none;
            background: none;
            color: var(--text-light);
            font-weight: 600;
            padding: 10px 18px;
            border-radius: 20px;
            margin-right: 8px;
            font-size: 12px;
        }

        .nav-tabs .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-tabs .nav-link i {
            font-size: 11px;
        }

        .breadcrumb {
            font-size: 12px;
            margin-bottom: 15px;
        }

        .alert {
            padding: 10px 15px;
            font-size: 12px;
            border-radius: 8px;
        }

        .card {
            font-size: 12px;
        }

        .card-title {
            font-size: 1rem;
        }

        .card-body {
            padding: 15px;
        }

        .card-img-top {
            height: 180px;
        }

        .amenity-tag {
            display: inline-block;
            padding: 4px 10px;
            background: var(--accent-color);
            border-radius: 15px;
            margin-right: 6px;
            margin-bottom: 6px;
            font-size: 11px;
        }

        small {
            font-size: 11px;
        }

        .btn-sm {
            padding: 5px 12px;
            font-size: 11px;
        }

        .btn-outline-primary {
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .room-gallery {
                height: 300px;
            }

            .features-grid {
                grid-template-columns: 1fr 1fr;
            }

            .booking-widget {
                position: static;
                margin-top: 20px;
            }

            .price-display {
                text-align: left;
                margin-top: 15px;
            }

            .current-price {
                font-size: 1.5rem;
            }

            .room-title {
                font-size: 1.5rem;
            }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>
<div th:replace="fragments/user_navbar :: user_navbar"></div>

<div class="container my-5">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>
            <li class="breadcrumb-item"><a th:href="@{/branches/{id}(id=${branch.id})}" th:text="${branch.name}">Chi nhánh</a></li>
            <li class="breadcrumb-item active" th:text="${roomType.name}">Loại phòng</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="room-gallery fade-in">
                <div class="main-image">
                    <div th:with="mainImageUrl=${#lists.isEmpty(roomImages) ?
                           'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80' :
                           roomImages.get(0).imageUrl}">
                        <img id="mainImage" th:src="${mainImageUrl}" th:alt="${roomType.name}">
                    </div>

                    <div class="gallery-overlay">
                        <i class="fas fa-camera me-2"></i><span th:text="${#lists.size(roomImages)}">0</span> ảnh
                    </div>
                    <div class="gallery-thumbnails">
                        <div class="thumbnail"
                             th:each="image, iterStat : ${roomImages}"
                             th:classappend="${iterStat.first} ? 'active' : ''"
                             th:data-image-url="${image.imageUrl}"
                             onclick="changeImage(this.dataset.imageUrl, this)">
                            <img th:src="${image.imageUrl}" th:alt="${image.imageTitle}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="room-header fade-in">
                <div class="row align-items-end">
                    <div class="col-md-8">
                        <h1 class="room-title heading-font" th:text="${roomType.name}">Tên loại phòng</h1>
                        <div class="room-rating">
                            <div class="stars">
                                <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, 5)}"></i>
                            </div>
                            <span class="fw-semibold">4.8/5</span>
                            <span class="text-muted">(124 đánh giá)</span>
                        </div>
                        <p class="lead text-muted" th:text="${roomType.description}">Mô tả loại phòng</p>
                    </div>
                    <div class="col-md-4 price-display">
                        <div class="old-price" th:if="${roomType.originalPrice != null and roomType.originalPrice > roomType.currentPrice}"
                             th:text="${#numbers.formatDecimal(roomType.originalPrice, 0, 'COMMA', 0, 'POINT') + '₫'}">
                        </div>
                        <div class="current-price" th:text="${roomType.formattedPrice}">Giá phòng</div>
                        <div class="price-note">/ đêm (chưa bao gồm thuế)</div>
                    </div>
                </div>
            </div>

            <div class="features-grid fade-in">
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <h6 th:text="${roomType.bedType}">Loại giường</h6>
                    <p class="mb-0 text-muted">Giường cao cấp</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h6><span th:text="${roomType.maxOccupancy}">0</span> Khách</h6>
                    <p class="mb-0 text-muted">Số người tối đa</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-ruler"></i>
                    </div>
                    <h6><span th:text="${roomType.roomSize}">0</span>m²</h6>
                    <p class="mb-0 text-muted">Diện tích phòng</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <h6 th:text="${roomType.viewType ?: 'City View'}">Tầm nhìn</h6>
                    <p class="mb-0 text-muted">View từ phòng</p>
                </div>
            </div>

            <div class="fade-in">
                <ul class="nav nav-tabs" id="roomTabs">
                    <li class="nav-item">
                        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#amenities">
                            <i class="fas fa-concierge-bell me-2"></i>Tiện nghi
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#policies">
                            <i class="fas fa-file-contract me-2"></i>Chính sách
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviews">
                            <i class="fas fa-star me-2"></i>Đánh giá
                        </button>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="amenities">
                        <div class="amenities-section">
                            <div class="amenities-grid">
                                <div class="amenity-category" th:if="${roomType.amenities != null}">
                                    <h6><i class="fas fa-concierge-bell me-2"></i>Tiện nghi phòng</h6>
                                    <div class="amenity-item" th:each="amenity : ${#strings.listSplit(roomType.amenities, ',')}">
                                        <i class="fas fa-check"></i>
                                        <span th:text="${#strings.trim(amenity)}">Tiện nghi</span>
                                    </div>
                                </div>

                                <div class="amenity-category">
                                    <h6><i class="fas fa-bed me-2"></i>Phòng ngủ</h6>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i>
                                        <span th:text="${roomType.bedType + ' cao cấp'}">Giường cao cấp</span>
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Ga giường cotton cao cấp
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Gối memory foam
                                    </div>
                                </div>

                                <div class="amenity-category">
                                    <h6><i class="fas fa-bath me-2"></i>Phòng tắm</h6>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Vòi hoa sen mưa
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Đồ dùng vệ sinh cao cấp
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Áo choàng tắm & dép
                                    </div>
                                </div>

                                <div class="amenity-category">
                                    <h6><i class="fas fa-wifi me-2"></i>Công nghệ</h6>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> WiFi tốc độ cao miễn phí
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Smart TV
                                    </div>
                                    <div class="amenity-item">
                                        <i class="fas fa-check"></i> Điều hòa thông minh
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="policies">
                        <div class="amenities-section">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6><i class="fas fa-clock me-2 text-primary"></i>Thời gian</h6>
                                    <ul class="list-unstyled">
                                        <li class="mb-2"><i class="fas fa-sign-in-alt me-2 text-success"></i> Check-in: 15:00</li>
                                        <li class="mb-2"><i class="fas fa-sign-out-alt me-2 text-danger"></i> Check-out: 12:00</li>
                                        <li class="mb-2"><i class="fas fa-calendar me-2 text-info"></i> Check-in sớm có thể được sắp xếp</li>
                                    </ul>

                                    <h6 class="mt-4"><i class="fas fa-ban me-2 text-danger"></i>Hủy phòng</h6>
                                    <ul class="list-unstyled">
                                        <li class="mb-2">• Hủy miễn phí trước 24h</li>
                                        <li class="mb-2">• Hủy trong vòng 24h: phí 50%</li>
                                        <li class="mb-2">• No-show: tính 100% phí phòng</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6><i class="fas fa-info-circle me-2 text-info"></i>Thông tin khác</h6>
                                    <ul class="list-unstyled">
                                        <li class="mb-2">• Không hút thuốc</li>
                                        <li class="mb-2">• Đảm bảo thẻ tín dụng khi check-in</li>
                                        <li class="mb-2">• Phí phụ thu cho khách vượt quá</li>
                                        <li class="mb-2">• Dịch vụ dọn phòng hàng ngày</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="reviews">
                        <div class="review-card">
                            <div class="reviewer-info">
                                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b605?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Reviewer" class="reviewer-avatar">
                                <div>
                                    <div class="reviewer-name">Nguyễn Minh Anh</div>
                                    <div class="review-date">15 tháng 8, 2024</div>
                                </div>
                            </div>
                            <div class="review-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <p>"Phòng tuyệt vời với thiết kế hiện đại. Dịch vụ chu đáo, nhân viên thân thiện. Sẽ quay lại lần sau!"</p>
                        </div>

                        <button class="btn btn-outline-primary">Xem thêm đánh giá</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="booking-widget fade-in">
                <h5><i class="fas fa-calendar-check me-2"></i>Đặt phòng ngay</h5>

                <form class="booking-form"
                      th:action="@{/bookings/room-type/{id}/select(id=${roomType.id})}"
                      method="post">

                    <div class="row g-3">
                        <div class="col-12">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt me-1"></i>Ngày nhận phòng
                            </label>
                            <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt me-1"></i>Ngày trả phòng
                            </label>
                            <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label">
                                <i class="fas fa-door-open me-1"></i>Số lượng phòng
                            </label>
                            <select class="form-select" name="numberOfRooms" id="numberOfRooms" required>
                                <option value="1" selected>1 phòng</option>
                                <option value="2">2 phòng</option>
                                <option value="3">3 phòng</option>
                                <option value="4">4 phòng</option>
                                <option value="5">5 phòng</option>
                            </select>
                            <small class="text-muted">Tối đa 5 phòng/lần đặt</small>
                        </div>

                        <div class="col-6">
                            <label class="form-label">
                                <i class="fas fa-user me-1"></i>Người lớn
                            </label>
                            <select class="form-select" name="adults" id="adults" required>
                                <option value="1">1</option>
                                <option value="2" selected>2</option>
                                <option value="3" th:if="${roomType.maxOccupancy >= 3}">3</option>
                                <option value="4" th:if="${roomType.maxOccupancy >= 4}">4</option>
                            </select>
                        </div>

                        <div class="col-6">
                            <label class="form-label">
                                <i class="fas fa-child me-1"></i>Trẻ em
                            </label>
                            <select class="form-select" name="children" id="children">
                                <option value="0" selected>0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                        </div>
                    </div>

                    <div id="availabilityInfo" class="mt-3"></div>

                    <div class="pricing-summary mt-3">
                        <div class="pricing-row">
                            <span id="priceText" th:text="${roomType.formattedPrice + ' x 1 đêm x 1 phòng'}"></span>
                            <span id="basePrice" th:text="${roomType.formattedPrice}">0₫</span>
                        </div>
                        <div class="pricing-row">
                            <span>Phí dịch vụ (10%)</span>
                            <span id="servicePrice">0₫</span>
                        </div>
                        <div class="pricing-row">
                            <span>Thuế VAT (10%)</span>
                            <span id="vatPrice">0₫</span>
                        </div>
                        <div class="pricing-row total">
                            <span>Tổng cộng</span>
                            <span id="totalPrice" th:text="${roomType.formattedPrice}">0₫</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-luxury w-100 mt-3" id="bookingBtn">
                        <i class="fas fa-arrow-right me-2"></i>Tiếp tục
                    </button>

                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fas fa-shield-alt me-1"></i>
                            Không tính phí cho đến khi xác nhận
                        </small>
                    </div>
                </form>
            </div>

            <!-- Room Info Widget -->
<!--            <div class="booking-widget mt-4" style="background: linear-gradient(135deg, var(&#45;&#45;primary-color), #d4b079); color: white;">-->
<!--                <h5 style="color: white;"><i class="fas fa-info-circle me-2"></i>Thông tin phòng</h5>-->
<!--                <div class="mb-3">-->
<!--                    <p class="mb-2"><i class="fas fa-map-marker-alt me-2"></i><span th:text="${branch.name + ' - ' + branch.address}">Địa chỉ</span></p>-->
<!--                    <p class="mb-2"><i class="fas fa-phone me-2"></i><span th:text="${branch.phoneNumber}">Số điện thoại</span></p>-->
<!--                    <p class="mb-2"><i class="fas fa-bed me-2"></i>Còn <span th:text="${#lists.size(availableRooms)}">0</span> phòng trống</p>-->
<!--                </div>-->
<!--                <div class="d-grid gap-2">-->
<!--                    <a th:href="'tel:' + ${branch.phoneNumber}" class="btn btn-light">-->
<!--                        <i class="fas fa-phone me-2"></i>Gọi ngay-->
<!--                    </a>-->
<!--                    <a th:href="'mailto:' + ${branch.email}" class="btn btn-outline-light">-->
<!--                        <i class="fas fa-envelope me-2"></i>Email-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->
        </div>
    </div>

    <!-- Similar Rooms -->
    <section class="mt-5" th:if="${!#lists.isEmpty(similarRoomTypes)}">
        <h3 class="heading-font mb-4">Phòng tương tự</h3>
        <div class="row g-4">
            <div class="col-md-4" th:each="similar : ${similarRoomTypes}" th:if="${similar.id != roomType.id}">
                <div class="card border-0 shadow-sm">
                    <img th:src="${!#lists.isEmpty(similar.roomImages) ? similar.roomImages[0].imageUrl : 'https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}"
                         class="card-img-top" style="height: 180px; object-fit: cover;" th:alt="${similar.name}">
                    <div class="card-body">
                        <h5 class="card-title heading-font" th:text="${similar.name}">Tên phòng</h5>
                        <p class="card-text text-muted" th:text="${#strings.abbreviate(similar.description, 50)}">Mô tả phòng</p>
                        <div class="amenities-tags mb-3">
                            <span class="amenity-tag">
                                <i class="fas fa-users me-1"></i>
                                <span th:text="${similar.maxOccupancy}">2</span> khách
                            </span>
                            <span class="amenity-tag">
                                <i class="fas fa-bed me-1"></i>
                                <span th:text="${similar.bedType}">Double</span>
                            </span>
                            <span class="amenity-tag">
                                <i class="fas fa-expand-arrows-alt me-1"></i>
                                <span th:text="${similar.roomSize}">25</span>m²
                            </span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-primary fw-bold" th:text="${similar.formattedPrice + '/đêm'}">Giá/đêm</span>
                            <a th:href="@{/room-types/{id}(id=${similar.id})}" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script th:inline="javascript">
    const roomTypeId = /*[[${roomType.id}]]*/ 0;
    const basePrice = /*[[${roomType.price}]]*/ 0;

    const today = new Date().toISOString().split('T')[0];
    document.getElementById('checkInDate').setAttribute('min', today);

    document.getElementById('checkInDate').addEventListener('change', function() {
        const checkInDate = new Date(this.value);
        const minCheckOut = new Date(checkInDate);
        minCheckOut.setDate(minCheckOut.getDate() + 1);

        const minCheckOutStr = minCheckOut.toISOString().split('T')[0];
        document.getElementById('checkOutDate').setAttribute('min', minCheckOutStr);

        const checkOutInput = document.getElementById('checkOutDate');
        if (checkOutInput.value && checkOutInput.value <= this.value) {
            checkOutInput.value = '';
        }

        checkAvailabilityAndPrice();
    });

    document.getElementById('checkOutDate').addEventListener('change', checkAvailabilityAndPrice);
    document.getElementById('numberOfRooms').addEventListener('change', checkAvailabilityAndPrice);
    document.getElementById('adults').addEventListener('change', calculatePrice);
    document.getElementById('children').addEventListener('change', calculatePrice);

    function checkAvailabilityAndPrice() {
        const checkInDate = document.getElementById('checkInDate').value;
        const checkOutDate = document.getElementById('checkOutDate').value;
        const numberOfRooms = document.getElementById('numberOfRooms').value;

        if (!checkInDate || !checkOutDate) {
            return;
        }

        fetch(`/bookings/api/check-availability?roomTypeId=${roomTypeId}&checkInDate=${checkInDate}&checkOutDate=${checkOutDate}&numberOfRooms=${numberOfRooms}`)
            .then(response => response.json())
            .then(data => {
                const availabilityInfo = document.getElementById('availabilityInfo');
                const bookingBtn = document.getElementById('bookingBtn');

                if (data.available) {
                    availabilityInfo.innerHTML = `
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle me-2"></i>
                            ${data.message}
                        </div>
                    `;
                    bookingBtn.disabled = false;
                } else {
                    availabilityInfo.innerHTML = `
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            ${data.message}
                        </div>
                    `;
                    bookingBtn.disabled = true;
                }

                calculatePrice();
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    function calculatePrice() {
        const checkInDate = document.getElementById('checkInDate').value;
        const checkOutDate = document.getElementById('checkOutDate').value;
        const numberOfRooms = parseInt(document.getElementById('numberOfRooms').value);

        if (!checkInDate || !checkOutDate) {
            return;
        }

        const checkIn = new Date(checkInDate);
        const checkOut = new Date(checkOutDate);
        const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));

        if (nights <= 0) {
            return;
        }

        const roomTotal = basePrice * nights * numberOfRooms;
        const serviceFee = roomTotal * 0.1;
        const vat = (roomTotal + serviceFee) * 0.1;
        const total = roomTotal + serviceFee + vat;

        document.getElementById('priceText').textContent =
            `${formatCurrency(basePrice)} x ${nights} đêm x ${numberOfRooms} phòng`;
        document.getElementById('basePrice').textContent = formatCurrency(roomTotal);
        document.getElementById('servicePrice').textContent = formatCurrency(serviceFee);
        document.getElementById('vatPrice').textContent = formatCurrency(vat);
        document.getElementById('totalPrice').textContent = formatCurrency(total);
    }

    function formatCurrency(amount) {
        return new Intl.NumberFormat('vi-VN').format(amount) + '₫';
    }

    function changeImage(imageUrl, thumbnail) {
        document.getElementById('mainImage').src = imageUrl;

        document.querySelectorAll('.thumbnail').forEach(t => {
            t.classList.remove('active');
        });

        thumbnail.classList.add('active');
    }
</script>

</body>
</html>